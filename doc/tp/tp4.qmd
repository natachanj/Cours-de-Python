---
title: "TP Analyse de Donn√©es avec Pandas"
description: TP Analyse de Donn√©es avec Pandas
author: "Natacha NJONGWA YEPNGA"
format: 
  html:
    toc: true
    toc-location: left
    toc-depth: 3
from: markdown+emoji
number-sections: true
number-depth: 3
---
# TP Analyse de Donn√©es avec Pandas
# Partie 1 : Analyse des Donn√©es Financi√®res  

Ce TP a pour objectif d'explorer et d'analyser les donn√©es financi√®res de plusieurs grandes entreprises cot√©es en bourse : **NVIDIA, OpenAI, Amazon et Apple**. Nous allons r√©cup√©rer ces donn√©es directement depuis **Yahoo Finance** et les manipuler avec **pandas**.  

---

## 1. R√©cup√©ration et Exploration des Donn√©es  

### T√©l√©chargement des donn√©es depuis Yahoo Finance  

Nous allons utiliser la biblioth√®que `yfinance` pour r√©cup√©rer les prix historiques des actions de plusieurs entreprises technologiques.  

```python
import pandas as pd
import yfinance as yf

# Liste des tickers des entreprises √©tudi√©es
tickers = ['NVDA', 'AAPL', 'AMZN', 'MSFT']

# T√©l√©chargement des donn√©es de 2020 √† 2024
df = yf.download(tickers, start='2020-01-01', end='2024-01-01', group_by='ticker')

# Affichage des premi√®res lignes du DataFrame
print(df.head())
```

### Analyse exploratoire  

üìå **Questions √† traiter** :  

1. **Quelles sont les colonnes disponibles dans le DataFrame ?**  
2. **Quel est le nombre total de lignes et de colonnes ?**  
3. **Y a-t-il des valeurs manquantes ? Comment les g√©rer ?**  

---

## 2. Nettoyage et Pr√©paration des Donn√©es  

üìå **Questions √† traiter** :  

1. **Supprimez les lignes contenant des valeurs manquantes.**  
2. **D√©finissez la colonne Date comme index du DataFrame.**  
3. **V√©rifiez les types de donn√©es des colonnes et convertissez-les si n√©cessaire.**  

---

## 3. Analyse des Tendances du March√©  

### Calcul du rendement journalier  

Le rendement journalier d'une action est donn√© par la formule :  

\[
R_t = \frac{P_t - P_{t-1}}{P_{t-1}} \times 100
\]

üìå **Questions √† traiter** :  

1. **Quelle est la tendance des prix des actions pour chaque entreprise ?**  
2. **Quel jour chaque action a-t-elle atteint son plus haut prix ?**  
3. **Calculez le rendement quotidien de chaque action et affichez sa moyenne.**  

---

## 4. Comparaison des Performances  

üìå **Questions √† traiter** :  

1. **Quelle entreprise a eu la meilleure croissance sur la p√©riode analys√©e ?**  
2. **Quel est le rendement moyen mensuel de chaque action ?**  
3. **Comparez la volatilit√© des diff√©rentes actions.**  

---

## Conclusion  

- Quelle entreprise a eu la meilleure croissance sur la p√©riode ?  
- Quel titre a offert le rendement moyen le plus √©lev√© ?  
- Quelle action √©tait la plus volatile, indiquant un risque plus √©lev√© ?  
- Discussion sur les facteurs pouvant expliquer ces r√©sultats (ex. crise, innovations, changements dans l‚Äôindustrie).  

---

## R√©sum√© des principales manipulations avec pandas  

| Op√©ration | Commande Pandas |
|-----------|----------------|
| T√©l√©charger des donn√©es financi√®res | `yfinance.download()` |
| Afficher les colonnes disponibles | `df.columns` |
| V√©rifier la pr√©sence de valeurs manquantes | `df.isnull().sum()` |
| Supprimer les valeurs manquantes | `df.dropna()` |
| D√©finir un index de type datetime | `df.index = pd.to_datetime(df.index)` |
| Calculer le rendement journalier | `.pct_change()` |
| Calculer la volatilit√© | `.std()` |
| Trouver la date du prix maximum | `.idxmax()` |
| Agr√©ger les donn√©es par mois | `.resample('M').mean()` |

---

## Partie 2 : Analyse du Risque de D√©faut

Nous allons maintenant utiliser une base de donn√©es de cr√©dit pour analyser les facteurs influen√ßant le risque de d√©faut.

### Description des Colonnes de la Base de Donn√©es

| **Nom de la Colonne**             | **Description**                         |
|-----------------------------------|-----------------------------------------|
| `person_age`                      | √Çge                                    |
| `person_income`                   | Revenu annuel                          |
| `person_home_ownership`           | Type de propri√©t√©                      |
| `person_emp_length`               | Anciennet√© professionnelle (ann√©es)    |
| `loan_intent`                     | But du pr√™t                            |
| `loan_grade`                      | Grade du pr√™t                          |
| `loan_amnt`                       | Montant du pr√™t                        |
| `loan_int_rate`                   | Taux d'int√©r√™t                         |
| `loan_status`                     | Statut du pr√™t (0: non d√©faut, 1: d√©faut) |
| `loan_percent_income`             | Pourcentage du revenu                  |
| `cb_person_default_on_file`       | Historique de d√©faut                   |
| `cb_person_cred_hist_length`      | Longueur de l'historique de cr√©dit     |

### 1. Chargement et Exploration des Donn√©es

```python
df_credit = pd.read_csv('credit_risk_data.csv')
print(df_credit.head())
df_credit.info()
df_credit.describe()
```

üìå **Questions** :
1. Quelles sont les variables disponibles pour l‚Äôanalyse du risque de d√©faut ?
2. Quelle est la r√©partition des clients en d√©faut et non en d√©faut ?
3. Identifiez les valeurs manquantes et proposez une m√©thode de traitement.

### 2. Nettoyage et Pr√©paration des Donn√©es

üìå **Questions** :
1. Convertissez les variables cat√©goriques en variables num√©riques.
2. S√©parez le dataset en deux groupes : clients en d√©faut et non en d√©faut.

### 3. Analyse des Facteurs de Risque

üìå **Questions** :
Dans cette section, nous allons explorer les facteurs influen√ßant le risque de d√©faut en manipulant **pandas** et en r√©alisant des analyses num√©riques.  

## Objectifs  
- Manipuler des **DataFrames pandas** pour explorer les relations entre les variables.  
- Utiliser des statistiques descriptives et des mesures de corr√©lation.  
- Comprendre comment les facteurs influencent le risque de d√©faut et interpr√©ter les r√©sultats.  

## Questions et Analyses  

### 1. Impact du revenu annuel sur le risque de d√©faut  

**Analyse num√©rique**  
- Afficher les statistiques descriptives du revenu annuel en fonction du statut de d√©faut.  
- Comparer les moyennes et m√©dianes des revenus des clients en d√©faut et non en d√©faut.  
- Calculer l'√©cart-type et la variance du revenu annuel pour chaque groupe.  

**√âtapes**  
1. Charger les donn√©es dans un DataFrame pandas.  
2. Utiliser `.describe()` pour obtenir des statistiques globales sur le revenu annuel.  
3. Utiliser `.groupby('D√©faut')` et `.agg(['mean', 'median', 'std', 'var'])` pour comparer les groupes.  
4. Interpr√©ter les r√©sultats et voir si une tendance se d√©gage.  

---

### 2. Influence de l‚Äôhistorique des paiements sur le risque de d√©faut  

**Analyse num√©rique**  
- Calculer le nombre moyen de paiements en retard pour chaque statut de d√©faut.  
- Analyser la m√©diane et l'√©cart-type du nombre de paiements en retard.  
- D√©terminer si les clients en d√©faut ont un historique de paiements significativement diff√©rent des autres.  

**√âtapes**  
1. Utiliser `.groupby('D√©faut')['Nb_Paiements_Retard'].agg(['mean', 'median', 'std'])`.  
2. Comparer les valeurs moyennes et m√©dianes pour identifier les diff√©rences entre les groupes.  
3. V√©rifier si la dispersion des retards de paiement est plus √©lev√©e chez les clients en d√©faut.  

---

### 3. Identification des facteurs les plus corr√©l√©s au risque de d√©faut  

**Analyse num√©rique**  
- Calculer la matrice de corr√©lation entre les variables.  
- Identifier les trois facteurs les plus corr√©l√©s avec le risque de d√©faut.  
- V√©rifier si ces corr√©lations sont significatives.  

**√âtapes**  
1. Utiliser `.corr()` pour calculer la matrice de corr√©lation du DataFrame.  
2. Extraire les valeurs de corr√©lation associ√©es √† la colonne "D√©faut".  
3. Trier ces valeurs par ordre d√©croissant et s√©lectionner les trois variables les plus influentes.  
4. Interpr√©ter les r√©sultats et v√©rifier si ces facteurs sont coh√©rents avec les analyses pr√©c√©dentes.  

### Synth√®se
Dans cette section, nous allons approfondir l‚Äô√©tude des facteurs influen√ßant le risque de d√©faut en r√©alisant des analyses num√©riques sur la r√©partition des √¢ges et l'impact du statut d‚Äôemploi.  

## Objectifs  
- Analyser la distribution des √¢ges des clients √† l'aide de statistiques descriptives.  
- Examiner l'influence du statut d'emploi sur le risque de d√©faut √† travers des mesures num√©riques.  
- Synth√©tiser les r√©sultats obtenus et proposer des interpr√©tations.  

## Questions et Analyses  

###  Analyse de la distribution des √¢ges des clients  

**Analyse num√©rique**  
- Calculer les statistiques descriptives g√©n√©rales sur l'√¢ge des clients.  
- Identifier l'√¢ge moyen, la m√©diane, l'√©cart-type et les valeurs minimales/maximales.  
- D√©terminer s'il y a des valeurs aberrantes en comparant l‚Äô√©cart interquartile.  

**√âtapes**  
1. Utiliser `.describe()` sur la colonne **√Çge** pour obtenir les principales statistiques.  
2. V√©rifier les bornes des quartiles avec `.quantile([0.25, 0.5, 0.75])`.  
3. D√©terminer les valeurs aberrantes potentielles en utilisant la r√®gle des **1,5 IQR** (Interquartile Range).  
4. Comparer ces statistiques avec celles d‚Äôautres variables pour voir si certaines tranches d‚Äô√¢ge sont plus repr√©sent√©es parmi les clients en d√©faut.  

---

###  Influence du statut d‚Äôemploi sur le risque de d√©faut  

**Analyse num√©rique**  
- Compter le nombre de clients par cat√©gorie de statut d'emploi.  
- Calculer la proportion de clients en d√©faut dans chaque cat√©gorie de statut d'emploi.  
- Identifier si certaines cat√©gories ont un taux de d√©faut significativement plus √©lev√©.  

**√âtapes**  
1. Utiliser `.value_counts()` sur la colonne **Statut_Emploi** pour conna√Ætre la r√©partition des clients par cat√©gorie.  
2. Grouper les donn√©es par **Statut_Emploi** et calculer le **taux de d√©faut** dans chaque groupe avec `.groupby('Statut_Emploi')['D√©faut'].mean()`.  
3. Comparer ces taux et identifier les cat√©gories ayant une probabilit√© plus √©lev√©e de d√©faut.  
4. Interpr√©ter les r√©sultats en lien avec les analyses pr√©c√©dentes (ex. une cat√©gorie d‚Äôemploi avec des revenus plus faibles pourrait avoir un taux de d√©faut plus √©lev√©).  


---

