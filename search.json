[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Programmation avec Python: Analyse de donn√©es et Data visualisation",
    "section": "",
    "text": "6 sessions de 3 heures (18 heures au total)"
  },
  {
    "objectID": "index.html#contenu-du-cours",
    "href": "index.html#contenu-du-cours",
    "title": "Programmation avec Python: Analyse de donn√©es et Data visualisation",
    "section": "Contenu du cours",
    "text": "Contenu du cours\n\nIntroduction √† Python\n\nPr√©sentation et installation\nVariables, types de donn√©es, op√©rateurs\n\nStructures de contr√¥le\n\nConditions (if, elif, else)\nBoucles (for, while)\nGestion des erreurs (try, except)\n\nLes fonctions\n\nD√©finir et appeler des fonctions\nParam√®tres, valeurs de retour\n\nManipulation de donn√©es avec pandas\n\nChargement de fichiers CSV/Excel\nNettoyage des donn√©es (valeurs manquantes, transformations)\nS√©lection et filtrage des donn√©es\n\nVisualisation des donn√©es\n\nGraphiques avec Matplotlib\nVisualisation avanc√©e avec Seaborn\n\nProgrammation orient√©e objet (POO)\n\nD√©finition de classes, objets, m√©thodes\n\nIntroduction au Machine Learning avec Python\n\nBiblioth√®ques essentielles : scikit-learn\nPr√©paration des donn√©es pour le ML (normalisation, division en train/test)\nMod√®les supervis√©s : r√©gression lin√©aire et classification (KNN)\n√âvaluation des mod√®les : m√©triques (MAE, R¬≤, pr√©cision, rappel)\nNotions de surapprentissage et r√©gularisation\n\nProjet final\n\nNettoyage, exploration, visualisation et mod√©lisation d‚Äôun dataset"
  },
  {
    "objectID": "index.html#correction-des-tp",
    "href": "index.html#correction-des-tp",
    "title": "Programmation avec Python: Analyse de donn√©es et Data visualisation",
    "section": "Correction des TP",
    "text": "Correction des TP\n\nS√©ance 1 : Introduction √† Python\n\nTP1 :\n\n√âcrire un programme pour manipuler des types simples (nombres, cha√Ænes).\nImpl√©menter un calcul d‚Äôaire et p√©rim√®tre de figures g√©om√©triques.\nAjouter une fonction pour v√©rifier si un mot est un palindrome.\n\n\n\n\nS√©ance 2 : Structures de contr√¥le\n\nTP2 :\n\nCr√©er un programme pour afficher les nombres premiers dans une plage donn√©e.\n√âcrire des scripts utilisant des boucles imbriqu√©es (tables de multiplication).\nAjouter la gestion d‚Äôerreurs pour une division par z√©ro.\n\n\n\n\nS√©ance 3 : Manipulation de donn√©es avec pandas\n\nTP3 :\n\nCharger un dataset CSV.\nNettoyer les donn√©es (valeurs manquantes, doublons).\nAppliquer des filtres conditionnels pour extraire des sous-ensembles.\nEffectuer des statistiques descriptives simples (mean, std, min, max).\n\n\n\n\nS√©ance 4 : Visualisation des donn√©es\n\nTP4 :\n\nCr√©er des histogrammes et des scatterplots avec Matplotlib.\nUtiliser Seaborn pour tracer des heatmaps et analyser des corr√©lations.\nPersonnaliser des graphiques (titres, √©tiquettes, couleurs).\n\n\n\n\nS√©ance 5 : Programmation orient√©e objet (POO)\n\nTP5 :\n\nImpl√©menter une classe pour g√©rer les donn√©es d‚Äôun √©tudiant (nom, notes, moyenne).\n\nAjouter des m√©thodes pour calculer la moyenne et v√©rifier la r√©ussite.\n\n√âtendre la classe avec des attributs suppl√©mentaires (mati√®res optionnelles).\n\n\n\n\nS√©ance 6 : Machine Learning avec Python\n\nTP6 :\n\nCharger un dataset (pandas) et le pr√©parer pour le Machine Learning (normalisation, s√©paration train/test).\n\nImpl√©menter un mod√®le de r√©gression lin√©aire pour pr√©dire une variable cible.\n\nUtiliser un mod√®le de classification (KNN) pour classer des donn√©es.\n\n√âvaluer les performances avec des m√©triques comme R¬≤, pr√©cision et rappel."
  },
  {
    "objectID": "doc/cours/introduction.html",
    "href": "doc/cours/introduction.html",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "",
    "text": "Python est un langage de programmation polyvalent, appr√©ci√© pour sa simplicit√© et sa lisibilit√©. Il est utilis√© dans des domaines vari√©s comme le d√©veloppement web, la data science, et l‚Äôintelligence artificielle.\n\n\n\n\nPython est un langage interpr√©t√©, open source, et multiplateforme.\nCr√©√© par Guido van Rossum en 1989 (premi√®re version en 1991).\nPoints forts :\n\nSyntaxe simple et lisible.\nLarge √©cosyst√®me de biblioth√®ques.\n\n\n\n\n\n\n\nPratique r√©guli√®re : Codez r√©guli√®rement pour solidifier vos bases.\nExplorez des projets simples : Calculatrice, jeu de devinettes, gestion d‚Äôinventaire.\nUtilisez les ressources disponibles :\n\nDocumentation officielle : python.org/doc.\nPlateformes d‚Äôexercices : LeetCode, Hackerrank.\n\n\n\n\n\n\n\n\n\nT√©l√©chargez Python depuis python.org.\n\n\n\n\n\n\n\n\nQu‚Äôest-ce que VS Code ?\n\nUn √©diteur de code l√©ger, puissant et extensible, d√©velopp√© par Microsoft.\n\nId√©al pour √©crire et ex√©cuter des scripts Python gr√¢ce √† ses extensions.\n\nInstaller VS Code :\n\nT√©l√©chargez-le sur code.visualstudio.com.\n\nInstallez l‚Äôextension Python via le Visual Studio Code Marketplace :\n\nOuvrez VS Code.\nAllez dans l‚Äôonglet des extensions (ic√¥ne avec des blocs).\nRecherchez Python et cliquez sur ‚ÄúInstaller‚Äù.\n\n\n\n\n\n\n\n\nQu‚Äôest-ce qu‚ÄôAnaconda ?\n\nUne distribution Python incluant Jupyter Notebook, des biblioth√®ques populaires (NumPy, Pandas, Matplotlib, etc.) et un gestionnaire d‚Äôenvironnements.\n\nId√©al pour la data science et le machine learning.\n\nInstaller Anaconda :\n\nT√©l√©chargez-le depuis anaconda.com.\n\nSuivez les instructions pour votre syst√®me d‚Äôexploitation (Windows, macOS, Linux).\n\nAvantages :\n\nConfiguration simplifi√©e pour d√©buter.\n\nGestion facile des environnements virtuels avec conda.\n\n\n\n\n\n\n\nQu‚Äôest-ce que Jupyter Notebook ?\n\nUn environnement interactif o√π vous pouvez √©crire et ex√©cuter du code Python dans des blocs (appel√©s ‚Äúcellules‚Äù).\n\nId√©al pour la data science et les visualisations.\n\nInstaller Jupyter Notebook :\n\nSi vous avez Anaconda, Jupyter est pr√©install√©.\n\nSinon, installez-le avec pip :\npip install notebook\n\n\n\n\n\n\n\nQu‚Äôest-ce que Google Colab ?\n\nUn environnement en ligne gratuit pour coder en Python, d√©velopp√© par Google.\n\nAucun besoin d‚Äôinstaller Python ou Jupyter : tout fonctionne dans votre navigateur.\n\nAvantage : acc√®s √† des GPU gratuits pour le machine learning.\n\nAcc√©der √† Google Colab :\n\nRendez-vous sur colab.research.google.com.\n\nConnectez-vous avec un compte Google.\n\nCr√©ez un nouveau notebook en cliquant sur New Notebook.\n\nFonctionnalit√©s cl√©s :\n\nSauvegarde automatique sur Google Drive.\n\nSupport int√©gr√© des biblioth√®ques populaires (NumPy, Pandas, Matplotlib, etc.).\n\n\n\n\n\n\n\n\nPython est un langage polyvalent, lisible et largement utilis√©. Cette section vous guide √† travers les bases essentielles pour bien commencer avec Python.\n\n\nUne variable est un conteneur permettant de stocker des donn√©es. En Python, il suffit de nommer la variable et d‚Äôy attribuer une valeur :\nx = 5\ny = \"Python\"\nprint(x, y)\n\n\n\n\nDans un script Python, tout ce qui suit le caract√®re # est ignor√© par l‚Äôinterpr√©teur jusqu‚Äô√† la fin de la ligne. Ces lignes sont appel√©es commentaires et sont destin√©es √† expliquer le code dans un langage humain.\n\n\n\n\nClarifier le code : Expliquez des portions complexes pour vous ou d‚Äôautres d√©veloppeurs.\nDocumenter le fonctionnement : Fournir des indications sur le r√¥le d‚Äôun morceau de code ou d‚Äôune fonction.\nFaciliter la maintenance : Les commentaires rendent votre code plus compr√©hensible √† long terme.\n\nLes commentaires ne sont pas ex√©cut√©s par Python et n‚Äôaffectent donc pas les performances du programme.\n\nPour ajouter un commentaire, commencez la ligne avec un #. Python ignorera tout ce qui suit ce caract√®re jusqu‚Äô√† la fin de la ligne.\nExemple simple :\n# Ceci est un commentaire simple\nprint(\"Hello world!\")  # Affiche un message √† l'√©cran\n\n# D√©claration de variables\nnom = \"Alice\"  # Nom de l'utilisateur\nage = 25       # √Çge de l'utilisateur\n\n# Affichage des informations\nprint(f\"Nom : {nom}\")\nprint(f\"√Çge : {age}\")\n\n# Cette partie affiche une salutation\nprint(\"Bonjour et bienvenue dans le cours de Python !\")\n\n\n\n\nSoyez concis et clair Vos commentaires doivent aller √† l‚Äôessentiel et √™tre compr√©hensibles.\n\n# Calcule la somme des √©l√©ments de la liste\ntotal = sum([1, 2, 3, 4])\n\n√âvitez les commentaires inutiles\n\nNe commentez pas des choses √©videntes que le code lui-m√™me exprime clairement.\nExemple inutile :\n# Attribue la valeur 5 √† la variable x\nx = 5\n\nMettez √† jour vos commentaires\n\nAssurez-vous que vos commentaires refl√®tent toujours le fonctionnement r√©el du code, surtout apr√®s des modifications.\n\n\n\n\nCommentaires sur une ligne\n\nIls s‚Äô√©crivent avec # au d√©but de la ligne.\n# Ce programme affiche un message\nprint(\"Bienvenue en Python !\")\n\nCommentaires multilignes\n\nPour commenter plusieurs lignes, vous pouvez utiliser # au d√©but de chaque ligne ou une cha√Æne de caract√®res triple (\"\"\" ou ''') si le commentaire est temporaire.\n# D√©but du programme\n# Ce script montre un exemple\n# avec des commentaires multilignes.\nOu avec une cha√Æne triple :\n\"\"\"\nCe script illustre :\n- L'utilisation de variables\n- L'utilisation des commentaires\n\"\"\""
  },
  {
    "objectID": "doc/cours/introduction.html#introduction",
    "href": "doc/cours/introduction.html#introduction",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "",
    "text": "Python est un langage de programmation polyvalent, appr√©ci√© pour sa simplicit√© et sa lisibilit√©. Il est utilis√© dans des domaines vari√©s comme le d√©veloppement web, la data science, et l‚Äôintelligence artificielle.\n\n\n\n\nPython est un langage interpr√©t√©, open source, et multiplateforme.\nCr√©√© par Guido van Rossum en 1989 (premi√®re version en 1991).\nPoints forts :\n\nSyntaxe simple et lisible.\nLarge √©cosyst√®me de biblioth√®ques.\n\n\n\n\n\n\n\nPratique r√©guli√®re : Codez r√©guli√®rement pour solidifier vos bases.\nExplorez des projets simples : Calculatrice, jeu de devinettes, gestion d‚Äôinventaire.\nUtilisez les ressources disponibles :\n\nDocumentation officielle : python.org/doc.\nPlateformes d‚Äôexercices : LeetCode, Hackerrank.\n\n\n\n\n\n\n\n\n\nT√©l√©chargez Python depuis python.org.\n\n\n\n\n\n\n\n\nQu‚Äôest-ce que VS Code ?\n\nUn √©diteur de code l√©ger, puissant et extensible, d√©velopp√© par Microsoft.\n\nId√©al pour √©crire et ex√©cuter des scripts Python gr√¢ce √† ses extensions.\n\nInstaller VS Code :\n\nT√©l√©chargez-le sur code.visualstudio.com.\n\nInstallez l‚Äôextension Python via le Visual Studio Code Marketplace :\n\nOuvrez VS Code.\nAllez dans l‚Äôonglet des extensions (ic√¥ne avec des blocs).\nRecherchez Python et cliquez sur ‚ÄúInstaller‚Äù.\n\n\n\n\n\n\n\n\nQu‚Äôest-ce qu‚ÄôAnaconda ?\n\nUne distribution Python incluant Jupyter Notebook, des biblioth√®ques populaires (NumPy, Pandas, Matplotlib, etc.) et un gestionnaire d‚Äôenvironnements.\n\nId√©al pour la data science et le machine learning.\n\nInstaller Anaconda :\n\nT√©l√©chargez-le depuis anaconda.com.\n\nSuivez les instructions pour votre syst√®me d‚Äôexploitation (Windows, macOS, Linux).\n\nAvantages :\n\nConfiguration simplifi√©e pour d√©buter.\n\nGestion facile des environnements virtuels avec conda.\n\n\n\n\n\n\n\nQu‚Äôest-ce que Jupyter Notebook ?\n\nUn environnement interactif o√π vous pouvez √©crire et ex√©cuter du code Python dans des blocs (appel√©s ‚Äúcellules‚Äù).\n\nId√©al pour la data science et les visualisations.\n\nInstaller Jupyter Notebook :\n\nSi vous avez Anaconda, Jupyter est pr√©install√©.\n\nSinon, installez-le avec pip :\npip install notebook\n\n\n\n\n\n\n\nQu‚Äôest-ce que Google Colab ?\n\nUn environnement en ligne gratuit pour coder en Python, d√©velopp√© par Google.\n\nAucun besoin d‚Äôinstaller Python ou Jupyter : tout fonctionne dans votre navigateur.\n\nAvantage : acc√®s √† des GPU gratuits pour le machine learning.\n\nAcc√©der √† Google Colab :\n\nRendez-vous sur colab.research.google.com.\n\nConnectez-vous avec un compte Google.\n\nCr√©ez un nouveau notebook en cliquant sur New Notebook.\n\nFonctionnalit√©s cl√©s :\n\nSauvegarde automatique sur Google Drive.\n\nSupport int√©gr√© des biblioth√®ques populaires (NumPy, Pandas, Matplotlib, etc.)."
  },
  {
    "objectID": "doc/cours/introduction.html#premiers-pas-avec-python",
    "href": "doc/cours/introduction.html#premiers-pas-avec-python",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "",
    "text": "Python est un langage polyvalent, lisible et largement utilis√©. Cette section vous guide √† travers les bases essentielles pour bien commencer avec Python.\n\n\nUne variable est un conteneur permettant de stocker des donn√©es. En Python, il suffit de nommer la variable et d‚Äôy attribuer une valeur :\nx = 5\ny = \"Python\"\nprint(x, y)\n\n\n\n\nDans un script Python, tout ce qui suit le caract√®re # est ignor√© par l‚Äôinterpr√©teur jusqu‚Äô√† la fin de la ligne. Ces lignes sont appel√©es commentaires et sont destin√©es √† expliquer le code dans un langage humain.\n\n\n\n\nClarifier le code : Expliquez des portions complexes pour vous ou d‚Äôautres d√©veloppeurs.\nDocumenter le fonctionnement : Fournir des indications sur le r√¥le d‚Äôun morceau de code ou d‚Äôune fonction.\nFaciliter la maintenance : Les commentaires rendent votre code plus compr√©hensible √† long terme.\n\nLes commentaires ne sont pas ex√©cut√©s par Python et n‚Äôaffectent donc pas les performances du programme.\n\nPour ajouter un commentaire, commencez la ligne avec un #. Python ignorera tout ce qui suit ce caract√®re jusqu‚Äô√† la fin de la ligne.\nExemple simple :\n# Ceci est un commentaire simple\nprint(\"Hello world!\")  # Affiche un message √† l'√©cran\n\n# D√©claration de variables\nnom = \"Alice\"  # Nom de l'utilisateur\nage = 25       # √Çge de l'utilisateur\n\n# Affichage des informations\nprint(f\"Nom : {nom}\")\nprint(f\"√Çge : {age}\")\n\n# Cette partie affiche une salutation\nprint(\"Bonjour et bienvenue dans le cours de Python !\")\n\n\n\n\nSoyez concis et clair Vos commentaires doivent aller √† l‚Äôessentiel et √™tre compr√©hensibles.\n\n# Calcule la somme des √©l√©ments de la liste\ntotal = sum([1, 2, 3, 4])\n\n√âvitez les commentaires inutiles\n\nNe commentez pas des choses √©videntes que le code lui-m√™me exprime clairement.\nExemple inutile :\n# Attribue la valeur 5 √† la variable x\nx = 5\n\nMettez √† jour vos commentaires\n\nAssurez-vous que vos commentaires refl√®tent toujours le fonctionnement r√©el du code, surtout apr√®s des modifications.\n\n\n\n\nCommentaires sur une ligne\n\nIls s‚Äô√©crivent avec # au d√©but de la ligne.\n# Ce programme affiche un message\nprint(\"Bienvenue en Python !\")\n\nCommentaires multilignes\n\nPour commenter plusieurs lignes, vous pouvez utiliser # au d√©but de chaque ligne ou une cha√Æne de caract√®res triple (\"\"\" ou ''') si le commentaire est temporaire.\n# D√©but du programme\n# Ce script montre un exemple\n# avec des commentaires multilignes.\nOu avec une cha√Æne triple :\n\"\"\"\nCe script illustre :\n- L'utilisation de variables\n- L'utilisation des commentaires\n\"\"\""
  },
  {
    "objectID": "doc/cours/introduction.html#quest-ce-quune-variable",
    "href": "doc/cours/introduction.html#quest-ce-quune-variable",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "2.1 Qu‚Äôest-ce qu‚Äôune variable ?",
    "text": "2.1 Qu‚Äôest-ce qu‚Äôune variable ?\nUne variable est un conteneur permettant de stocker une valeur ou des donn√©es. En Python, une variable peut contenir diff√©rents types de donn√©es comme des nombres, du texte, ou des structures complexes."
  },
  {
    "objectID": "doc/cours/introduction.html#d√©claration-dune-variable",
    "href": "doc/cours/introduction.html#d√©claration-dune-variable",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "2.2 D√©claration d‚Äôune variable",
    "text": "2.2 D√©claration d‚Äôune variable\nEn Python, il suffit d‚Äôutiliser un nom valide et de lui assigner une valeur avec le symbole =.\nExemple :\n# D√©claration de variables\nnom = \"Alice\"   # Cha√Æne de caract√®res\nage = 25        # Entier\npi = 3.14       # Nombre flottant\nest_actif = True  # Bool√©en"
  },
  {
    "objectID": "doc/cours/introduction.html#les-types-de-base-en-python",
    "href": "doc/cours/introduction.html#les-types-de-base-en-python",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "2.3 Les Types de Base en Python",
    "text": "2.3 Les Types de Base en Python\nPython propose plusieurs types de donn√©es de base, essentiels pour la manipulation des informations.\n\n\n\n\n\n\n### Comment conna√Ætre le type d‚Äôune variable en Python ?\n\n\nPython propose une fonction int√©gr√©e appel√©e type() pour d√©terminer le type de donn√©es d‚Äôune variable.\n\n\n\n\nUtilisation de type()\nLa fonction type() prend une variable en argument et retourne son type.\nExemples de types que vous pourriez rencontrer : - str : Cha√Æne de caract√®res - int : Entier - float : Nombre d√©cimal - bool : Valeur logique\n\nCes types de base constituent les fondations des programmes en Python et sont utilis√©s dans presque tous les scripts.\n\n\nCha√Ænes de caract√®res (str)\nLes cha√Ænes de caract√®res permettent de stocker du texte. Elles peuvent √™tre utilis√©es pour manipuler des mots, des phrases ou des caract√®res individuels.\nExemple :\n# D√©claration de variables\nnom = \"Alice\"   # Cha√Æne de caract√®res\ntype(nom)\n\n\n\nEntiers (int)\nLes entiers repr√©sentent des nombres sans d√©cimales, qu‚Äôils soient positifs ou n√©gatifs.\nExemple :\n# D√©claration de variables\nage = 25        # Entier\ntype(age)\n\n\n\nFlottants (float)\nLes flottants repr√©sentent des nombres avec des d√©cimales, id√©aux pour des calculs n√©cessitant des fractions. Exemple :\n# D√©claration de variables\npi = 3.14       # Nombre flottant\ntype(pi)\n\n\n\nBool√©ens (bool)\nLes bool√©ens sont des valeurs logiques, pouvant √™tre True (vrai) ou False (faux). Ils sont souvent utilis√©s pour effectuer des comparaisons ou contr√¥ler le flux d‚Äôun programme. Exemple :\n# D√©claration de variables\nest_actif = True  # Bool√©en\ntype(est_actif)\n\n\n\nR√©sum√© des types de base\n\n\n\nType\nDescription\n\n\n\n\nstr\nCha√Æne de caract√®res\n\n\nint\nNombres entiers\n\n\nfloat\nNombres d√©cimaux\n\n\nbool\nValeurs logiques (True/False)"
  },
  {
    "objectID": "doc/cours/introduction.html#la-fonction-print",
    "href": "doc/cours/introduction.html#la-fonction-print",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.1 La fonction print()",
    "text": "3.1 La fonction print()\nprint() est utilis√©e pour afficher des informations dans la console. Elle permet de montrer le contenu de variables, des messages, ou des r√©sultats de calcul.\nExemple :\nprint(valeur)"
  },
  {
    "objectID": "doc/cours/introduction.html#afficher-plusieurs-√©l√©ments",
    "href": "doc/cours/introduction.html#afficher-plusieurs-√©l√©ments",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.2 Afficher plusieurs √©l√©ments",
    "text": "3.2 Afficher plusieurs √©l√©ments\nVous pouvez afficher plusieurs √©l√©ments en m√™me temps en les s√©parant par des virgules. Python ajoute automatiquement un espace entre ces √©l√©ments.\nExemple :\nprint(\"Bonjour\", \"Python\", 3.10)"
  },
  {
    "objectID": "doc/cours/introduction.html#formatage-des-cha√Ænes",
    "href": "doc/cours/introduction.html#formatage-des-cha√Ænes",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.3 Formatage des cha√Ænes",
    "text": "3.3 Formatage des cha√Ænes\nPour des affichages dynamiques et lisibles, plusieurs m√©thodes de formatage sont disponibles :\n\nConcat√©nation avec + : Combine des cha√Ænes de caract√®res.\n\nnom = \"Alice\"\nprint(\"Bonjour, \" + nom)\n\nSubstitution avec f-strings : Ins√®re directement des variables dans une cha√Æne avec une syntaxe claire.\n\nnom = \"Alice\"\nage = 25\nprint(f\"Bonjour, je m'appelle {nom} et j'ai {age} ans.\")\n\nM√©thode format() : Ins√®re des variables dans une cha√Æne avec des positions sp√©cifiques.\n\nnom = \"Alice\"\nage = 25\nprint(\"Bonjour, je m'appelle {} et j'ai {} ans.\".format(nom, age))"
  },
  {
    "objectID": "doc/cours/introduction.html#caract√®res-sp√©ciaux",
    "href": "doc/cours/introduction.html#caract√®res-sp√©ciaux",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.4 Caract√®res sp√©ciaux",
    "text": "3.4 Caract√®res sp√©ciaux\nCertaines s√©quences sp√©ciales permettent de modifier l‚Äôaffichage : - \\\\n : Effectue un saut de ligne. - \\\\t : Ajoute une tabulation.\nCes caract√®res sont utiles pour structurer l‚Äôaffichage dans la console.\nprint(\"Bonjour\\\\nPython\")\nprint(\"Nom:\\\\tAlice\")"
  },
  {
    "objectID": "doc/cours/introduction.html#contr√¥ler-la-fin-de-laffichage",
    "href": "doc/cours/introduction.html#contr√¥ler-la-fin-de-laffichage",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.5 Contr√¥ler la fin de l‚Äôaffichage",
    "text": "3.5 Contr√¥ler la fin de l‚Äôaffichage\nPar d√©faut, chaque appel √† print() termine par un saut de ligne. Il est possible de modifier ce comportement pour afficher plusieurs √©l√©ments sur la m√™me ligne.\nprint(\"Bonjour\", end=\" \")\nprint(\"Python !\")"
  },
  {
    "objectID": "doc/cours/introduction.html#r√©sum√©",
    "href": "doc/cours/introduction.html#r√©sum√©",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "3.6 R√©sum√©",
    "text": "3.6 R√©sum√©\n\n\n\n\n\n\n\nM√©thode\nDescription\n\n\n\n\nprint()\nAffiche des donn√©es dans la console.\n\n\nConcat√©nation\nCombine plusieurs cha√Ænes de caract√®res.\n\n\nf-strings\nIns√®re des variables directement dans une cha√Æne.\n\n\n.format()\nFormate une cha√Æne avec des variables.\n\n\nCaract√®res sp√©ciaux\nModifie l‚Äôapparence (nouvelle ligne, tabulation)."
  },
  {
    "objectID": "doc/cours/introduction.html#les-structures-conditionnelles",
    "href": "doc/cours/introduction.html#les-structures-conditionnelles",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "4.1 Les Structures conditionnelles",
    "text": "4.1 Les Structures conditionnelles\nLes structures conditionnelles permettent d‚Äôex√©cuter des blocs de code uniquement si une condition est remplie."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#introduction",
    "href": "doc/cours/introduction-slides.html#introduction",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Introduction",
    "text": "Introduction\nPython est un langage de programmation polyvalent, appr√©ci√© pour sa simplicit√© et sa lisibilit√©. Il est utilis√© dans des domaines vari√©s comme le d√©veloppement web, la data science, et l‚Äôintelligence artificielle."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#premiers-pas-avec-python",
    "href": "doc/cours/introduction-slides.html#premiers-pas-avec-python",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Premiers pas avec Python",
    "text": "Premiers pas avec Python\nPython est un langage polyvalent, lisible et largement utilis√©. Cette section vous guide √† travers les bases essentielles pour bien commencer avec Python."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#quest-ce-quune-variable",
    "href": "doc/cours/introduction-slides.html#quest-ce-quune-variable",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Qu‚Äôest-ce qu‚Äôune variable ?",
    "text": "Qu‚Äôest-ce qu‚Äôune variable ?\nUne variable est un conteneur permettant de stocker une valeur ou des donn√©es. En Python, une variable peut contenir diff√©rents types de donn√©es comme des nombres, du texte, ou des structures complexes."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#d√©claration-dune-variable",
    "href": "doc/cours/introduction-slides.html#d√©claration-dune-variable",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "D√©claration d‚Äôune variable",
    "text": "D√©claration d‚Äôune variable\nEn Python, il suffit d‚Äôutiliser un nom valide et de lui assigner une valeur avec le symbole =.\nExemple :\n# D√©claration de variables\nnom = \"Alice\"   # Cha√Æne de caract√®res\nage = 25        # Entier\npi = 3.14       # Nombre flottant\nest_actif = True  # Bool√©en"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#les-types-de-base-en-python",
    "href": "doc/cours/introduction-slides.html#les-types-de-base-en-python",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Les Types de Base en Python",
    "text": "Les Types de Base en Python\nPython propose plusieurs types de donn√©es de base, essentiels pour la manipulation des informations.\n\n\n\n\n\n\n### Comment conna√Ætre le type d‚Äôune variable en Python ?\n\n\nPython propose une fonction int√©gr√©e appel√©e type() pour d√©terminer le type de donn√©es d‚Äôune variable."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#la-fonction-print",
    "href": "doc/cours/introduction-slides.html#la-fonction-print",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "La fonction print()",
    "text": "La fonction print()\nprint() est utilis√©e pour afficher des informations dans la console. Elle permet de montrer le contenu de variables, des messages, ou des r√©sultats de calcul.\nExemple :\nprint(valeur)"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#afficher-plusieurs-√©l√©ments",
    "href": "doc/cours/introduction-slides.html#afficher-plusieurs-√©l√©ments",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Afficher plusieurs √©l√©ments",
    "text": "Afficher plusieurs √©l√©ments\nVous pouvez afficher plusieurs √©l√©ments en m√™me temps en les s√©parant par des virgules. Python ajoute automatiquement un espace entre ces √©l√©ments.\nExemple :\nprint(\"Bonjour\", \"Python\", 3.10)"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#formatage-des-cha√Ænes",
    "href": "doc/cours/introduction-slides.html#formatage-des-cha√Ænes",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Formatage des cha√Ænes",
    "text": "Formatage des cha√Ænes\nPour des affichages dynamiques et lisibles, plusieurs m√©thodes de formatage sont disponibles :\n\nConcat√©nation avec + : Combine des cha√Ænes de caract√®res.\n\nnom = \"Alice\"\nprint(\"Bonjour, \" + nom)\n\nSubstitution avec f-strings : Ins√®re directement des variables dans une cha√Æne avec une syntaxe claire.\n\nnom = \"Alice\"\nage = 25\nprint(f\"Bonjour, je m'appelle {nom} et j'ai {age} ans.\")\n\nM√©thode format() : Ins√®re des variables dans une cha√Æne avec des positions sp√©cifiques.\n\nnom = \"Alice\"\nage = 25\nprint(\"Bonjour, je m'appelle {} et j'ai {} ans.\".format(nom, age))"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#caract√®res-sp√©ciaux",
    "href": "doc/cours/introduction-slides.html#caract√®res-sp√©ciaux",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Caract√®res sp√©ciaux",
    "text": "Caract√®res sp√©ciaux\nCertaines s√©quences sp√©ciales permettent de modifier l‚Äôaffichage : - \\\\n : Effectue un saut de ligne. - \\\\t : Ajoute une tabulation.\nCes caract√®res sont utiles pour structurer l‚Äôaffichage dans la console.\nprint(\"Bonjour\\\\nPython\")\nprint(\"Nom:\\\\tAlice\")"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#contr√¥ler-la-fin-de-laffichage",
    "href": "doc/cours/introduction-slides.html#contr√¥ler-la-fin-de-laffichage",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Contr√¥ler la fin de l‚Äôaffichage",
    "text": "Contr√¥ler la fin de l‚Äôaffichage\nPar d√©faut, chaque appel √† print() termine par un saut de ligne. Il est possible de modifier ce comportement pour afficher plusieurs √©l√©ments sur la m√™me ligne.\nprint(\"Bonjour\", end=\" \")\nprint(\"Python !\")"
  },
  {
    "objectID": "doc/cours/introduction-slides.html#r√©sum√©",
    "href": "doc/cours/introduction-slides.html#r√©sum√©",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "R√©sum√©",
    "text": "R√©sum√©\n\n\n\n\n\n\n\nM√©thode\nDescription\n\n\n\n\nprint()\nAffiche des donn√©es dans la console.\n\n\nConcat√©nation\nCombine plusieurs cha√Ænes de caract√®res.\n\n\nf-strings\nIns√®re des variables directement dans une cha√Æne.\n\n\n.format()\nFormate une cha√Æne avec des variables.\n\n\nCaract√®res sp√©ciaux\nModifie l‚Äôapparence (nouvelle ligne, tabulation)."
  },
  {
    "objectID": "doc/cours/introduction-slides.html#les-structures-conditionnelles",
    "href": "doc/cours/introduction-slides.html#les-structures-conditionnelles",
    "title": "Introduction √† Python : Bases et Structures Fondamentales",
    "section": "Les Structures conditionnelles",
    "text": "Les Structures conditionnelles\nLes structures conditionnelles permettent d‚Äôex√©cuter des blocs de code uniquement si une condition est remplie."
  },
  {
    "objectID": "doc/tp/tp1.html",
    "href": "doc/tp/tp1.html",
    "title": "Premi√®res requ√™tes SQL",
    "section": "",
    "text": "Vous allez r√©aliser ce TP su un Datalab.\n\n\n\n\n\n\nLe Datalab en quelques mots\n\n\n\nUn TP d√©di√© vous expliquera plus en d√©tail ce qu‚Äôest le Datalab.\nLe Datalab permet aux utilisateurs de lancer facilement des services pour travailler avec des langages comme R ou Python, ou encore g√©rer des bases de donn√©es.\nIl offre une grande puissance de calcul, ce qui permet de traiter de gros volumes de donn√©es et de r√©aliser des analyses complexes sans se soucier des limites techniques.\nAvec cette plateforme :\n\nles utilisateurs acc√®dent aux ressources n√©cessaires en quelques clics\nsans devoir installer eux-m√™mes les logiciels\nni configurer les serveurs\n\n\n\n\n\nConnectez-vous √† l‚Äôune des 2 instances suivantes (elles sont quasiment identiques) :\n\nDatalab du GENES\nDatalab SSPCloud de l‚ÄôINSEE\n\nen cr√©ant un compte avec votre mail ENSAI\n\n\n\n\n\n\n\n\nTip\n\n\n\nPour √©viter les probl√®mes de charges :\n\nLes √©l√®ves fonctionnaires feront le TP sur le SSPCloud\nLes √©l√®ves ing√©nieurs ‚û°Ô∏è Datalab du GENES\n\n\n\n\n\n\n\n\n\n\n\n\nEn cas d‚Äôindisponibilit√© des Datalabs\n\n\n\nUniquement en cas d‚Äôindisponibilit√© des Datalabs, vous pouvez r√©aliser le TP directement sur la VM. Le logiciel DBeaver est install√©.\n\n\n\nLancez DBeaver\nOnglet Base de donn√©es ‚û°Ô∏è Nouvelle Connexion\n\nType de connexion : DuckDB\nSuivant\nPath : :memory:\nTerminer\n\nDans l‚Äôexplorer (√† gauche), clic droit sur la connexion que vous venez de cr√©er\n\nEditeur SQL ‚û°Ô∏è Script SQL (raccourci : F3)\n\n\nCela ouvre une fen√™tre dans laquelle vous pouvez saisir du SQL."
  },
  {
    "objectID": "doc/tp/tp1.html#introduction",
    "href": "doc/tp/tp1.html#introduction",
    "title": "Premi√®res requ√™tes SQL",
    "section": "",
    "text": "Vous allez r√©aliser ce TP su un Datalab.\n\n\n\n\n\n\nLe Datalab en quelques mots\n\n\n\nUn TP d√©di√© vous expliquera plus en d√©tail ce qu‚Äôest le Datalab.\nLe Datalab permet aux utilisateurs de lancer facilement des services pour travailler avec des langages comme R ou Python, ou encore g√©rer des bases de donn√©es.\nIl offre une grande puissance de calcul, ce qui permet de traiter de gros volumes de donn√©es et de r√©aliser des analyses complexes sans se soucier des limites techniques.\nAvec cette plateforme :\n\nles utilisateurs acc√®dent aux ressources n√©cessaires en quelques clics\nsans devoir installer eux-m√™mes les logiciels\nni configurer les serveurs\n\n\n\n\n\nConnectez-vous √† l‚Äôune des 2 instances suivantes (elles sont quasiment identiques) :\n\nDatalab du GENES\nDatalab SSPCloud de l‚ÄôINSEE\n\nen cr√©ant un compte avec votre mail ENSAI\n\n\n\n\n\n\n\n\nTip\n\n\n\nPour √©viter les probl√®mes de charges :\n\nLes √©l√®ves fonctionnaires feront le TP sur le SSPCloud\nLes √©l√®ves ing√©nieurs ‚û°Ô∏è Datalab du GENES\n\n\n\n\n\n\n\n\n\n\n\n\nEn cas d‚Äôindisponibilit√© des Datalabs\n\n\n\nUniquement en cas d‚Äôindisponibilit√© des Datalabs, vous pouvez r√©aliser le TP directement sur la VM. Le logiciel DBeaver est install√©.\n\n\n\nLancez DBeaver\nOnglet Base de donn√©es ‚û°Ô∏è Nouvelle Connexion\n\nType de connexion : DuckDB\nSuivant\nPath : :memory:\nTerminer\n\nDans l‚Äôexplorer (√† gauche), clic droit sur la connexion que vous venez de cr√©er\n\nEditeur SQL ‚û°Ô∏è Script SQL (raccourci : F3)\n\n\nCela ouvre une fen√™tre dans laquelle vous pouvez saisir du SQL."
  },
  {
    "objectID": "doc/tp/tp1.html#lancement-du-service",
    "href": "doc/tp/tp1.html#lancement-du-service",
    "title": "Premi√®res requ√™tes SQL",
    "section": "1 Lancement du service",
    "text": "1 Lancement du service\n\n\n\n\n\n\nNote\n\n\n\nUniquement sur le Datalab.\n\n\n\nLancez le service CloudBeaver\n\nAllez dans Catalogue de services\nOnglet Databases\n\n\n\n\n\n\n\n\nCloudBeaver\n\n\n\nCloudBeaver est une application web l√©g√®re d√©di√©e √† la gestion de bases de donn√©es. Elle permet de se connecter √† divers types de bases de donn√©es, qu‚Äôelles soient SQL, NoSQL ou h√©berg√©es dans le cloud, √† partir d‚Äôun seul point d‚Äôacc√®s via un navigateur. CloudBeaver facilite l‚Äôexploration, la modification et la visualisation des donn√©es sans n√©cessiter l‚Äôinstallation de logiciels locaux.\nElle offre √©galement des fonctionnalit√©s de s√©curit√© pour prot√©ger l‚Äôacc√®s aux donn√©es. Son interface conviviale en fait un outil accessible aussi bien aux d√©veloppeurs qu‚Äôaux analystes de donn√©es.\n\n\nPour ce premier TP, nous n‚Äôallons pas utiliser de base de donn√©es PostgreSQL. Nous allons simplement utiliser DuckDB pour lire des fichiers de donn√©es.\n\n\n\n\n\n\nDuckDB\n\n\n\nDuckDB est un moteur de base de donn√©es relationnelle con√ßu pour des analyses rapides et efficaces.\nDuckDB est id√©al pour les charges de travail analytiques en raison de sa simplicit√©, de sa rapidit√© et de son extensibilit√©, surtout pour traiter des fichiers volumineux localement.\n\n\n\n\n\n\n\nCaract√©ristique\nDescription\n\n\n\n\nSimplicit√©\nFonctionne sans serveur, int√©gr√© dans le processus h√¥te. Aucune d√©pendance externe pour la compilation ou l‚Äôex√©cution, simplifiant son d√©ploiement.\n\n\nRapidit√©\nOptimis√© pour l‚Äôanalytique (OLAP) avec un moteur d‚Äôex√©cution vectoris√© en colonnes, r√©duisant le temps de traitement pour les requ√™tes complexes.\n\n\nRichesse fonctionnelle\nSupporte des requ√™tes SQL complexes, fonctions de fen√™tre, index secondaires, et assure des garanties ACID gr√¢ce au contr√¥le de concurrence (MVCC).\n\n\nExtensibilit√©\nPermet l‚Äôajout de types de donn√©es, fonctions et formats de fichiers via des extensions (supporte Parquet, JSON, S3, HTTP(S)).\n\n\nGratuit et open-source\nLicence MIT, code source disponible et contributions ouvertes √† tous.\n\n\n\n\n\n\nCr√©ez une nouvelle connexion DuckDB\n\nEn haut √† gauche, cliquez sur le +, puis New connection\nS√©lectionner DuckDB\nCliquez sur le bouton CREATE\n\nOuvrez un √©diteur SQL\n\nDans l‚Äôexplorer √† gauche, clic droit sur votre connection DuckDB ‚û°Ô∏è SQL Editor\nvous pouvez maintenant saisir du code SQL"
  },
  {
    "objectID": "doc/tp/tp1.html#les-pr√©noms",
    "href": "doc/tp/tp1.html#les-pr√©noms",
    "title": "Premi√®res requ√™tes SQL",
    "section": "2 Les pr√©noms",
    "text": "2 Les pr√©noms\nLe fichier des pr√©noms contient des donn√©es sur les pr√©noms attribu√©s aux enfants n√©s en France depuis 1900. Ces donn√©es sont disponibles au niveau France et par d√©partement.\nDans ce TP, nous allons utiliser la version au format parquet, mise √† disposition sur le site data.gouv par Icem7.\n\n\n\n\n\n\nFichier parquet\n\n\n\nLe format Parquet est un format de fichier de stockage de donn√©es optimis√© pour les syst√®mes de traitement analytique de grande √©chelle. Voici ses principales caract√©ristiques :\n\nStockage en colonnes : Parquet stocke les donn√©es par colonnes plut√¥t que par lignes, ce qui am√©liore l‚Äôefficacit√© de l‚Äôacc√®s aux donn√©es dans les charges de travail analytiques.\nCompression efficace : La compression par colonne permet un taux de compression moyen de 5 √† 10 fois par rapport aux formats CSV, voire plus pour de gros fichiers. Cela r√©duit significativement la taille des donn√©es stock√©es et le co√ªt de stockage.\nOptimis√© pour l‚Äôanalytique : Parquet est con√ßu pour les requ√™tes en lecture intensive, car il permet de charger uniquement les colonnes n√©cessaires pour une analyse, ce qui am√©liore les performances en particulier sur les donn√©es volumineuses.\nM√©tadonn√©es Riches et Auto-descriptives : Parquet inclut des m√©tadonn√©es d√©taill√©es (sch√©ma, types de donn√©es, statistiques min/max), permettant une lecture rapide et sans risque d‚Äôerreur. Ces m√©tadonn√©es facilitent √©galement le traitement des donn√©es par diff√©rents outils.\nLangage Ind√©pendant et Open Source : Le format Parquet est ind√©pendant du langage et peut √™tre utilis√© avec divers langages de programmation (Python, R, C++, Java). Il est aussi open source et compatible avec la plupart des frameworks de big data.\n\n\n\nPour en savoir plus sur le format Parquet :\n\nParquet, qu‚Äôest-ce que c‚Äôest ?, Databricks\nWhat is the Parquet File Format?, Upsolver blog\n\n\n\nCr√©ez une vue prenom qui pointera vers le fichier parquet des pr√©noms\nCREATE OR REPLACE VIEW prenom AS\nFROM 'https://static.data.gouv.fr/resources/base-prenoms-insee-format-parquet/20231121-161435/prenoms-nat2022.parquet'\n\nVous pourrez ensuite requ√™ter sur cette vue comme si c‚Äô√©tait une table\n\n\n\n\n\n\n\n\n√âx√©cuter une requ√™te\n\n\n\nCliquez sur la requ√™te pour y positionner le pointeur de la souris, puis au choix :\n\nCliquez sur le petit triangle orange\nCTRL + ENTREE\n\n\n\n\n2.1 Premi√®res requ√™tes\n\n\n\n\n\n\nImportant\n\n\n\nPrenez le temps et l‚Äôhabitude d‚Äô√©crire de jolies requ√™tes bien align√©es !!!\n\n\nbien.sql\n\nSELECT c.nom AS club, \n       AVG(j.elo) AS moyenne_elo\n  FROM joueuse j \n INNER JOIN club c USING (id_club) \n WHERE j.mail IS NOT NULL \n GROUP BY c.nom \n ORDER BY 2 DESC;\n\n\n\n\npasbien.sql\n\nSELECT c.nom AS club, AVG(j.elo) AS moyenne_elo FROM joueuse j INNER JOIN club c USING (id_club) WHERE mail IS NOT NULL GROUP BY c.nom ORDER BY 2 DESC;\n\n\n\n\nListez tous les √©l√©ments de prenom\nFiltrez pour ne plus afficher les pr√©noms rares\n\n\n\n\n\n\n\nSecret statistique\n\n\n\nLes pr√©noms ayant un nombre insuffisant d‚Äôoccurrences sont regroup√©s sous une appellation g√©n√©rique. Cela permet de prot√©ger le secret statistique et de garantir l‚Äôanonymat.\nSans cette pr√©caution, par exemple :\n\nsi vous vous appeliez Yann-Adam LEFGRIGO\net que vous √™tes le seul √† porter ce pr√©nom\nn‚Äôimporte qui pourrait conna√Ætre votre ann√©e de naissance\n\nDe m√™me, si vous √™tiez 2 √† porter ce pr√©nom, l‚Äôautre Yann-Adam connaitrait aussi votre ann√©e de naissance. Ce n‚Äôest toujours pas satisfaisant. Il faut donc √† minima 3 individus pour garantir l‚Äôanonymat.\n\n\n\nDe quel type est le champ annais ? Pourquoi ?\nListez les diff√©rentes ann√©es de naissance\n\nClassez-ces ann√©es en d√©croissant\nQue remarquez-vous ?\n\nAjoutez un filtre pour exclure l‚Äôann√©e non renseign√©e\n\n\n\n2.2 Ann√©e 2022\n\n\n\n\n\n\nFiltrez sur l‚Äôann√©e 2022 et excluez les pr√©noms rares.\n\n\n\n\nListez les pr√©noms de l‚Äôann√©e 2022\n\nClassez-les en d√©croissant par le nombre de fois o√π ils sont √©t√© donn√©s\n\nListez les pr√©noms de l‚Äôann√©e 2022 donn√©s plus de 2000 fois\nClassez-les d‚Äôabord par sexe, puis par nombre d√©croissant d‚Äôoccurrences\n\nQuels sont les pr√©noms masculins et f√©minins les plus donn√©s ?\n\nListez les pr√©noms f√©minins commen√ßant par la lettre Q\nCompter le nombre de pr√©noms commen√ßant par chaque lettre\n\nPour extraite la premi√®re lettre d‚Äôun pr√©nom, vous pouvez par exemple utiliser la fonction SUBSTRING\nBonus : diff√©renciez filles et gar√ßons\n\n\n\n\n2.3 Statistiques descriptives\n\nLancez la commande SUMMARIZE prenom; pour avoir quelques stats sur la table\n\n\n\n\n\n\n\nFiltrez pour exclure les pr√©noms rares.\n\n\n\n\nAffichez pour l‚Äôann√©e 2003, les pr√©noms et leurs nombres de caract√®res\n\nTrouvez une fonction ad√©quate\n\nAffichez le nombres de caract√®res minimum, maximum et moyen parmi les pr√©noms de 2003\nListez les 3 pr√©noms de 2003 ayant le nombre de caract√®res maximum\nModifiez cette derni√®re requ√™te pour afficher pour chaque ann√©e entre 2015 et 2022 le ou les pr√©noms avec le plus de caract√®res\n\nclassez par ann√©e\nDifficulty : ‚≠ê ‚≠ê ‚≠ê\n\nAffichez pour chaque ann√©e la taille moyenne des pr√©noms\n\nclassez par ann√©e\nutilisez la fonction ROUND(&lt;value&gt;, 2) pour arrondir les moyennes\nQue remarquez-vous ?\n\n\n\n\n\n\n\n\nTip\n\n\n\n\n\nDans cette partie vous allez avoir besoin d‚Äôutiliser des sous-requ√™tes\n\n\n\n\n\n2.4 J√©r√¥me, c‚Äôest moi\n\nListez les diff√©rentes ann√©es o√π le pr√©nom J√âR√îME a √©t√© donn√©\n\nclassez par ann√©e d√©croissante\nQue remarquez-vous ?\n\nListez √©galement les JEROME avec d‚Äôautres accents / sans accent\n\nrecherchez une fonction DuckDB qui permet de r√©pondre √† ce besoin\n\nAffichez pour chaque ann√©e le nombre de fois o√π le pr√©nom JEROME a √©t√© donn√©, quelle que soit l‚Äôaccentuation\n\n\n\n\n\n\n\nAide\n\n\n\n\n\n\nvoir Fontion DuckDB strip_accents()\nRegroupez par strip_accents(preusuel) et annais\nAffichez strip_accents(preusuel), annais et la somme de la colonne nombre\n\n\n\n\n\n\n2.5 Suivi temporel\n\n\n\n\n\n\nFiltrez pour exclure l‚Äôann√©e XXXX.\n\n\n\n\nCr√©ez une requ√™te qui permet d‚Äôavoir le nombre de naissances par ann√©e depuis l‚Äôann√©e 2000\n\nClassez par ann√©e d√©croissante\n\nCompl√©tez la requ√™te pour afficher le nombre de pr√©noms diff√©rents donn√©es chaque ann√©e\n\nRemarque : vous n‚Äôaurez pas le nombre exact car certains sont dans les pr√©noms rares\n\n√âcrivez une requ√™te qui donne le nombre de filles et de gar√ßons n√©s chaque ann√©e depuis 2000\n\n\n\n\n\n\n\nNote\n\n\n\nM√™me si le champ annais n‚Äôest pas de type num√©rique, il est possible de comparer des chaines de caract√®res.\nLe code ASCII est utilis√© pour comparer le premier caract√®re de la chaine, puis en cas d‚Äô√©galit√©, le 2e caract√®re‚Ä¶\n\n\n\n\n2.6 Pr√©noms compos√©s\nNous allons maintenant nous interesser aux pr√©noms compos√©s entre 2000 et 2009\n\nListez les pr√©noms compos√©s entre les ann√©es 2000 et 2009 incluses\nRegroupez-les par preusuel, puis affichez √©galement le nombre de fois o√π ils ont √©t√© donn√©s\n\nTriez en d√©croissant par ce nombre\n\nFiltrez pour ne garder que les pr√©noms compos√©s contenant le pr√©nom JEAN\n\nQue remarquez-vous ? N‚Äôy a-t-il pas des intrus ?\n\nTrouvez une solution pour rem√©dier √† ce souci\n\nPar exemple avec la fonction DuckDB split_part()\n\n\n\n\n2.7 Cette ann√©e-l√†\n\n\n\n\n\n\nDifficulty : ‚≠ê ‚≠ê ‚≠ê\nFiltrez sur l‚Äôann√©e 1962 et excluez les pr√©noms rares.\n\n\n\n\nComptez le nombre de pr√©noms distincts donn√©s\nCompl√©tez en comptant le nombre de pr√©noms distincts donn√©s par sexe\nCompl√©tez en calculant le nombre total des pr√©noms distincts donn√©s, en prenant en compte la distinction entre les sexes\n\nexemple : ici Dominique (H) et Dominique (F) comptent pour 2 pr√©noms\n\nDonnez la liste des pr√©noms donn√©s √† la fois √† des filles et des gar√ßons\n\naffichez le nombre de fois o√π ils ont √©t√© donn√©s √† chaque sexe\n\nAjoutez √† la derni√®re requ√™te une colonne contenant un bool√©en qui affiche\n\nTrue si le pr√©nom a √©t√© donn√© √† plus de filles que de gar√ßons\nFalse sinon\n\nAu lieu d‚Äôafficher ce bool√©en, ajoutez une condition pour n‚Äôafficher que lorsque le pr√©nom a √©t√© plus donn√© √† des filles"
  },
  {
    "objectID": "doc/tp/tp1.html#fichier-des-individus",
    "href": "doc/tp/tp1.html#fichier-des-individus",
    "title": "Premi√®res requ√™tes SQL",
    "section": "3 Fichier des individus",
    "text": "3 Fichier des individus\n\nCr√©ez une vue qui pointe vers le fichier des individus du recensement de la population 2020\nCREATE OR REPLACE VIEW individus AS\nFROM 'https://static.data.gouv.fr/resources/recensement-de-la-population-fichiers-detail-individus-localises-au-canton-ou-ville-2020-1/20231023-122841/fd-indcvi-2020.parquet';\nComptez le nombre d‚Äôindividus\n\nPourquoi ce nombre d‚Äôindividus vivant en France para√Æt faible ?\n\n\n\n\n\n\n\n\nPoids de l‚Äôindividu\n\n\n\nDans de nombreuses bases de donn√©es de l‚ÄôINSEE, la variable ipondi repr√©sente le poids de l‚Äôindividu.\ni.e.¬†Si une ligne a un IPONDI √©gal √† 2, cela signifie qu‚Äôelle repr√©sente 2 individus.\n\n\n\nAu lieu de compter le nombre de lignes, sommez la variable ipondi\n\nVous pouvez suffixer votre somme par ::INT pour convertir ce nombre en entier\n\nAffichez 10 lignes\n\nQue remarquez-vous ?\n\n\n\n\n\n\n\n\nCodification\n\n\n\nPourquoi utiliser une codification pour le fichier national individus localis√©s au canton-ou-ville du recensement de la population 2020 ?\n\nEspace de stockage r√©duit : Les codes courts remplacent des cha√Ænes de texte plus longues, ce qui diminue la taille du fichier et rend le stockage et le transfert de donn√©es plus efficaces. M√™me apr√®s codification, le fichier p√®se plus de 500 Mo\nStandardisation et uniformit√© : Utiliser des codes standardis√©s permet de garantir une structure homog√®ne et facilite l‚Äôint√©gration et la comparaison des donn√©es entre diff√©rents fichiers ou √©tudes.\nPerformances de traitement : Les codes sont plus rapides √† traiter que des textes longs, notamment pour des op√©rations de recherche, de tri, et de filtrage, ce qui est crucial pour les grands ensembles de donn√©es.\n\n\n\n\nPour s‚Äôy retrouver, cr√©ez une vue vers le dictionnaire des variables\nCREATE OR REPLACE VIEW variables_individus AS\nFROM 'https://static.data.gouv.fr/resources/recensement-de-la-population-fichiers-detail-individus-localises-au-canton-ou-ville-2020-1/20231025-082910/dictionnaire-variables-indcvi-2020.csv'\nAffichez tout le contenu de cette vue\nTrouvez la modalit√© repr√©sentant le d√©partement de r√©sidence de l‚Äôindividu\nAffichez le nombre d‚Äôhabitants par d√©partements\n\nordonnez par num√©ro de d√©partement\n\nCompl√©tez la requ√™te en :\n\nrestreignant sur les individus entre 25 et 29 ans\ndiff√©renciant les hommes et les femmes"
  },
  {
    "objectID": "doc/tp/tp1.html#arr√™tez-votre-service",
    "href": "doc/tp/tp1.html#arr√™tez-votre-service",
    "title": "Premi√®res requ√™tes SQL",
    "section": "Arr√™tez votre service",
    "text": "Arr√™tez votre service\nC‚Äôest la fin du TP, vous pouvez maintenant sauvegarder votre travail et lib√©rer les ressources r√©serv√©es :\n\nCopiez votre code et collez le sur votre machine dans un fichier .sql\n\npar exemple dans P:/Cours1A/UE3-Bases-de-donnees-relationnelles/TP1/tp1.sql\n\nRetournez sur la page d‚Äôaccueil du Datalab\nAllez dans Mes Services et supprimez votre service"
  },
  {
    "objectID": "doc/tp/tp1.html#pour-aller-plus-loin",
    "href": "doc/tp/tp1.html#pour-aller-plus-loin",
    "title": "Premi√®res requ√™tes SQL",
    "section": "Pour aller plus loin",
    "text": "Pour aller plus loin\n\n3 explorations bluffantes avec DuckDB"
  },
  {
    "objectID": "doc/tp/tp4.html",
    "href": "doc/tp/tp4.html",
    "title": "Chess Unofficial Federation",
    "section": "",
    "text": "Important\n\n\n\n\n√âcrivez des requ√™tes jolies !\n\n\n\nCe sujet vous occupera pour les TP4 et 5."
  },
  {
    "objectID": "doc/tp/tp4.html#introduction",
    "href": "doc/tp/tp4.html#introduction",
    "title": "Chess Unofficial Federation",
    "section": "",
    "text": "Important\n\n\n\n\n√âcrivez des requ√™tes jolies !\n\n\n\nCe sujet vous occupera pour les TP4 et 5."
  },
  {
    "objectID": "doc/tp/tp4.html#lancement-des-services",
    "href": "doc/tp/tp4.html#lancement-des-services",
    "title": "Chess Unofficial Federation",
    "section": "1 Lancement des services",
    "text": "1 Lancement des services\nConnectez-vous √† l‚Äôune des 2 instances suivantes d‚ÄôOnyxia (elles sont quasiment identiques) :\n\nDatalab du GENES\nDatalab SSPCloud de l‚ÄôINSEE\n\nsi besoin de cr√©er un compte, utilisez votre mail ENSAI\n\n\nEt ensuite lancez les services suivants (voir TP2 si besoin de plus de d√©tails)\n\nPostgreSQL : Datalab GENES ou SPPCloud\nCloudBeaver"
  },
  {
    "objectID": "doc/tp/tp4.html#les-donn√©es",
    "href": "doc/tp/tp4.html#les-donn√©es",
    "title": "Chess Unofficial Federation",
    "section": "2 Les donn√©es",
    "text": "2 Les donn√©es\n\n\n\n\n\n\nVotre mission du jour sera d‚Äôaider la nouvellement cr√©√©e F√©d√©ration Fran√ßaise des √âchecs Sinc√©res et Sans Subterfuges √† corriger les erreurs dans sa base de donn√©es pour ensuite r√©compenser ses meilleures joueuses.\n\n\n\n\n2.1 Chargez les donn√©es\n\nCopiez le contenu de ces 2 scripts sql\n\ncr√©ation des tables\ninsertion des donn√©es\n\nCollez-les dans la fen√™tre SQL de CloudBeaver\nEx√©cutez les scripts\n\nCliquez sur la petite icone sous les triangles oranges qui ressemble √† üìú\nraccourci (ALT + X)\n\n\n\n\n\n\n\n\nReprise TP5\n\n\n\nApr√®s avoir charg√© les donn√©es pour le TP5, veuillez appliquer ces corrections vues lors d‚Äôun exercice du TP4 :\nUPDATE echecs.joueuse\n   SET elo = elo - 1200\n WHERE elo &gt; 2600\n   AND code_titre IS NULL;\n\nUPDATE echecs.joueuse\n   SET date_naissance = date_naissance + INTERVAL '100 years'\n WHERE id_joueuse IN (111, 122, 133, 144);\n\nUPDATE echecs.joueuse\n   SET date_naissance = date_naissance - INTERVAL '100 years'\n WHERE id_joueuse IN (155, 166, 177, 188);\n\nUPDATE echecs.joueuse\n   SET nom = REPLACE(REPLACE(REPLACE(nom, 'EUH', 'E'), 'AO', 'A'), 'OU', 'U')\n WHERE code_titre IS NULL;\n\nDELETE FROM echecs.partie\n WHERE id_blanc = id_noir;\n\n\n\n\n2.2 Description\nLes tables sont les suivantes :\n\njoueuse(id_joueuse, code_titre, nom, prenom, elo, date_naissance, #id_club, arbitre)\ntitre(code, nom, description)\nclub(id_club, nom, ville, #id_presidente)\npartie(id_partie, #id_blanc, #id_noir, date_partie, #id_resultat, #id_ouverture, #id_tournoi)\nresultat_partie(id_resultat, resultat, description)\nouverture(id_ouverture, eco, nom, coups)\ntournoi(id_tournoi, nom, ville, date_debut, date_fin, #id_cadence, nb_rondes, nb_participantes, #id_arbitre)\ncadence(id_cadence, nom, description)\n\n\n\n\n\n\n\n\nCat√©gorie\nDescription\n\n\n\n\nJoueuse\nListe des joueuses\n\n\nTitre\nListe des titres, certains attribu√©s aux fortes joueuses\n\n\nClub\nListe des clubs\n\n\nPartie\nPartie entre 2 joueuses, soit libre, soit dans le cadre d‚Äôun tournoi\n\n\nR√©sultat_partie\nDiff√©rents r√©sultats possibles dans une partie (par exemple : victoire des blancs, match nul, etc.)\n\n\nOuverture\nD√©signation de l‚Äôouverture (comment d√©bute une partie)\n\n\nTournoi\nListe des tournois\n\n\nCadence\nRythme de jeu lors d‚Äôun tournoi (blitz, rapide, lent)\n\n\n\n\n\n2.3 Mod√®le de donn√©es\n\n\n\n\n\n\nCaution\n\n\n\nDans le mod√®le de donn√©es, certaines tables sont reli√©es 2 fois entre elles :\n\njoueuse et partie : car lors d‚Äôune partie une joueuse a les blancs et l‚Äôautre, les noirs\njoueuse et club :\n\nid_club est une cl√© √©trang√®re dans la table joueuse car une joueuse est membre d‚Äôun seul club\nid_presidente est une cl√© √©trang√®re de la table club r√©f√©ren√ßant l‚Äôid_joueuse de la pr√©sidente"
  },
  {
    "objectID": "doc/tp/tp4.html#recherche-des-irr√©gularit√©s",
    "href": "doc/tp/tp4.html#recherche-des-irr√©gularit√©s",
    "title": "Chess Unofficial Federation",
    "section": "3 Recherche des irr√©gularit√©s",
    "text": "3 Recherche des irr√©gularit√©s\n\n\n\n\n\n\n√Ä la f√©d√©ration, il y a malheureusement de nombreuses rumeurs de corruption, et m√™me de dopage !\nVotre premi√®re mission sera de v√©rifier l‚Äôint√©grit√© des donn√©es de la base.\n\n\n\nIl para√Ætrait que certaines joueuses aient truqu√©es leurs classements elo. V√©rifiez et corrigez cela :\n\nListez la table des joueuses\nClassez par elo d√©croissant\n√âcrivez une requ√™te qui permet d‚Äôafficher les joueuses avec un elo suspect (elo &gt; 2600 et non titr√©e)\n\nNotez leurs id_joueuse\n\nPour chacune de ces joueuses, diminuez leur elo de 1200\nV√©rifier √† partir de leurs id_joueuse que la mise √† jour a bien √©t√© effectu√©e\n\nUne autre erreur concernerait les dates de naissances des joueuses\n\nAffichez l‚Äôann√©e de naissance des joueuses\nRegroupez par ann√©e et comptez le nombre d‚Äôoccurences\n√âcrivez une requ√™te pour ne garder que les joueuses avec des ann√©es de naissances √©tranges\nApportez une correction adapt√©e\n\nToujours sur la table des joueuses, vous avez peut-√™tre remarqu√© qu‚Äôune puissante technique d‚Äôanonymisation a √©t√© utilis√©e.\n\nCommencez par afficher dans un SELECT une version plus propre\nUne fois que le r√©sultat est assez correct, mettez √† jour la table joueuse\n\n\n\n\n\n\n\nTip\n\n\n\n\n\n\nVous pouvez utiliser la fonction REPLACE()\n\net m√™me les enchainer : REPLACE(REPLACE(REPLACE()))\n\nAttention : les noms des joueuses titr√©es n‚Äôont pas √©t√© anonymis√©es\n\nSi vous souhaitez utiliser des techniques d‚Äôanonymisation un peu plus efficaces, rendez-vous en 3A pour les Master ID et STD.\n\n\n\nPassons maintenant √† la table des parties. √Ä votre avis, est-ce normal de jouer des parties contre soi-m√™me ?\n\nD√©tectez les parties suspectes\n√Ä partir de ces donn√©es, cr√©ez une table tricheuse pour pouvoir surveiller leurs agissements par la suite\nSupprimez les parties suspectes"
  },
  {
    "objectID": "doc/tp/tp4.html#√©lection-des-pr√©sidentes",
    "href": "doc/tp/tp4.html#√©lection-des-pr√©sidentes",
    "title": "Chess Unofficial Federation",
    "section": "4 √âlection des pr√©sidentes",
    "text": "4 √âlection des pr√©sidentes\n\n\n\n\n\n\nVous avez peut-√™tre remarqu√© que les clubs n‚Äôont pas de pr√©sidentes, nous allons donc organiser des √©lections sans triche !\nMais pour faire plus simple, la f√©d√© a d√©cid√© de nommer comme pr√©sidente de chaque club, sa joueuse ayant le plus faible elo.\n\n\n\n\nListez pour chaque club, ses joueuses\n\naffichez le nom du club, ainsi que tout le contenu de la table joueuse\n\nPour chaque club, trouvez le elo minimum\nStockez dans une table temporaire tous les couples (id_club, elo_minimum)\nTrouvez pour chaque club, la joueuse avec le plus petit elo\n\nen cas d‚Äô√©galit√©, prenez ensuite le plus petit id_joueuse\n\nStockez dans une table temporaire les couples (id_club, id_joueuse de la future pr√©sidente)\nMettez √† jour la table club avec leurs nouvelles pr√©sidentes\nListez les clubs et leurs pr√©sidentes"
  },
  {
    "objectID": "doc/tp/tp4.html#remise-en-route-tp5",
    "href": "doc/tp/tp4.html#remise-en-route-tp5",
    "title": "Chess Unofficial Federation",
    "section": "5 Remise en route TP5",
    "text": "5 Remise en route TP5\nQuelques questions faciles pour se remettre en route.\n\nAffichez noms, pr√©noms, elo des joueuses ainsi que le nom de leur club. Ordonnez par elo d√©croissant\n\nCombien avez-vous de lignes ?\nCombien de lignes compte la table joueuse ?\n\nAffichez tous les noms, pr√©noms, elo des joueuses ainsi que leur √©ventuel nom de club\nAjoutez √† la pr√©c√©dente requ√™te l‚Äô√©ventuel nom du titre de la joueuse"
  },
  {
    "objectID": "doc/tp/tp4.html#quelques-statistiques",
    "href": "doc/tp/tp4.html#quelques-statistiques",
    "title": "Chess Unofficial Federation",
    "section": "6 Quelques statistiques",
    "text": "6 Quelques statistiques\n\n\n\n\n\n\nRegardons maintenant quelques statistiques sur ces donn√©es.\n\n\n\n\nComptez le nombre de parties jou√©es\nAffichez le nombre de parties jou√©es par tournoi\n\naffichez le nom du tournoi\nincluez les parties jou√©es hors tournoi\n\nPour chaque tournoi, calculez √©galement les taux de victoire des blancs et des noirs, ainsi que celui de matchs nuls\n\n\n\n\n\n\n\nTip\n\n\n\n\n\n\nCommencez par exemple par calculer le nombre de victoires des blancs\nDivisez par le bon nombre\nPour avoir un float, vous pouvez multiplier par 1.0\nUtilisez ROUND() pour arrondir √† 2 chiffres significatifs\n\n\n\n\n\nCompl√©tez pour ne conserver que les tournois avec 20 % ou moins de matchs nuls\n\nJetons maintenant un oeil aux ouvertures qui permettent de gagner plus souvent\n\n\n\n\n\n\nOuvertures\n\n\n\nEn d√©but de partie, le nombre de coups possibles et corrects reste assez limit√©. Les diff√©rentes possibilit√©s de commencer une partie sont cat√©goris√©es et appel√©es Ouvertures.\nVient ensuite le milieu de jeu lorsque toutes les pi√®ces sont d√©velopp√©es.\nEt enfin (si personne ne s‚Äôest pris un √©chec et mat) la finale, i.e.¬†lorsque les Dames ont √©t√© √©chang√©es et qu‚Äôil reste peu de pi√®ces.\n\n\n\nUne des ouvertures n‚Äôexiste pas, elle n‚Äôa √©t√© jou√©e dans aucune partie\n\nTrouvez et supprimez cette ouverture\n\nComme fait pr√©c√©demment pour les tournois, calculez pour chaque ouverture :\n\nnombre de parties jou√©es\ntaux de victoire des blancs\ntaux de victoire des noirs\ntaux de matchs nuls\n\nAffichez les joueuses ayant jou√© plus de 5 fois avec les pi√®ces noires la D√©fense Sicilienne"
  },
  {
    "objectID": "doc/tp/tp4.html#afficher-les-r√©sultats-de-parties",
    "href": "doc/tp/tp4.html#afficher-les-r√©sultats-de-parties",
    "title": "Chess Unofficial Federation",
    "section": "7 Afficher les r√©sultats de parties",
    "text": "7 Afficher les r√©sultats de parties\nLes r√©sultats de parties sont g√©n√©ralement affich√©s sous ce format :\n\nAix-les-Bains 2006\n\n\n\n\n\n\n\n\n\nBlancs\n\nR√©s\nNoirs\n\n\n\n\n\nPRZYMUSINSKI Nicolas\n2043\n0 - 1\nf GREGOIRE Sylvain\n2268\n\n\nMEYNARD Thibault\n2256\n1 - 0\nZERMICHE Cherif\n2035\n\n\nHOUARD Yannick\n2010\nX - X\nPEREZ Flavio\n2230\n\n\nCOULON Guillaume\n2001\n0 - 1\nJOLLY Jean-Francois\n2211\n\n\nFISCHER Marc\n2185\nX - X\nDENEUVILLE Ludovic\n2003\n\n\nMATHIS Julien\n1951\n0 - 1\nPIERONI Guillaume\n2170\n\n\nBOIZANTE Yvain\n2148\nX - X\nSAEZ Nicolas\n1998\n\n\n\n\n\n\n\n\n\nL‚Äôobjectif de cette partie est d‚Äôaboutir √† ce r√©sultat.\nVous noterez le f √† la premi√®re ligne qui est l‚Äô√©ventuel titre de la joueuse en minuscule.\n\n\n\n\nCommencez par joindre les tables contenant les √©l√©ments √† afficher\nEnsuite, gardez uniquement les colonnes n√©cessaires\nConcat√©nez titre, nom et pr√©nom, et renommez les colonnes pour obtenir l‚Äôaffichage demand√©\nAffichez les r√©sultat du Blitz √† Rennes (tournoi)\n\n\n\n\n\n\n\nEnfin nous souhaitons r√©compenser la meilleure performance.\nUne performance est une victoire contre une joueuse ayant au moins 400 points elo de plus.\n\n\n\n\nAffichez toutes les performances\nClassez-les par diff√©rence de elo d√©croissante\n\n\n\n\n\n\n\nUn paquet de üç™ est √† retirer dans le bureau du professeur pour la joueuse d√©tentrice de la meilleure perf !\nEt pour l‚Äôautrice de la plus belle contre-perf, notre partenaire premium, la F√©d√©ration Fran√ßaise de la Lose offre un magnifique tee-shirt floqu√© Reine des Mazettes, J‚Äôai rat√© un mat en 1, Je suis pass√© de +10 √† -10 ou encore J‚Äôai fait pat avec Roi et Dame contre Roi."
  },
  {
    "objectID": "doc/tp/tp4.html#gagnantes-des-tournois",
    "href": "doc/tp/tp4.html#gagnantes-des-tournois",
    "title": "Chess Unofficial Federation",
    "section": "8 Gagnantes des tournois",
    "text": "8 Gagnantes des tournois\nVia la table partie, il est possible de retrouver quelle joueuse a particip√© √† quel tournoi.\nCependant ce n‚Äôest pas tr√®s intuitif, ni pratique.\nNous allons donc commencer par cr√©er une vue des participantes\n\nListez les diff√©rents tournois auquels a particip√© HOU Yifan\nListez tous les diff√©rents couples (id_joueuse, id_tournoi) possibles et existants dans la table partie\nCr√©ez la vue participante(id_tournoi, id_joueuse)\n\nen y ins√©rant les donn√©es de la derni√®re requ√™te\n\nV√©rifiez que cette vue contient 960 enregistrements\n\n\n\n\n\n\n\nPour trouver les gagnantes des tournois, il faut trouver leurs nombres de points marqu√©s.\nUne c√©l√©bre citation dit ¬´ Je ne perds jamais, soit je gagne, soit j‚Äôapprends ¬ª.\nAux √©checs, la victoire rapporte 1 point, le match nul 0.5 et la d√©faite 0.\n\n\n\nCependant un probl√®me se pose : une seule ligne de la partie contient le nombre de points marqu√©s de 2 joueuses.\n\n\n\nid_partie\nid_blanc\nid_noir\nresultat\n\n\n\n\n1\n11\n22\n1 - 0\n\n\n2\n123\n99\nX - X\n\n\n\nPour calculer les points de chaque joueuse, ce serait plus pratique de dupliquer chaque ligne pour avoir :\n\n\n\nid_partie\nid_joueuse\nscore\n\n\n\n\n1\n11\n1\n\n\n1\n22\n0\n\n\n2\n123\n0.5\n\n\n2\n99\n0.5\n\n\n\n\nListez pour toutes les parties, le score des blancs (comme sur le tableau ci-dessus)\nIncluez √©galement pour la suite, les colonnes :\n\nid_tournoi\nle elo de l‚Äôadversaire\n\nFaites de m√™me pour les noirs et stockez le tout dans une vue partie_score\n\n\n\n\n\n\n\nTip\n\n\n\n\n\n\nVous pouvez utiliser une structure CASE WHEN THEN\n\nSELECT &lt;?&gt;,\n       CASE\n           WHEN &lt;?&gt; THEN &lt;?&gt; \n           WHEN &lt;?&gt; THEN &lt;?&gt;\n           ELSE &lt;?&gt;          \n       END AS score\n  FROM &lt;?&gt;\n\n\n\n\nV√©rifiez que pour toutes les parties, le score cumul√© des deux joueuses vaut 1\nAffichez le classement par points de l‚ÄôOpen de Guingamp\n\nVous remarquez qu‚Äôil y a des √©galit√©s au nombre de points.\n\nUtilisez la moyenne elo des adversaires pour d√©partager les ex √¶quo\n\nPlus la joueuse a affront√© d‚Äôautres joueuses fortes, mieux elle sera class√©e\n\n\n\n\n\n\n\n\nV√©rification\n\n\n\n\n\nUne petite requ√™te basique pour v√©rifier vos r√©sultats :\nWITH resultat_score AS (\n    SELECT rp.*,\n           CASE\n               WHEN rp.resultat IN ('1 - 0', '1 - F') THEN 1 \n               WHEN rp.resultat = 'X - X'             THEN 0.5\n               ELSE 0\n           END AS score_blanc,\n           CASE\n               WHEN rp.resultat IN ('0 - 1', 'F - 1') THEN 1 \n               WHEN rp.resultat = 'X - X'             THEN 0.5\n               ELSE 0\n           END AS score_noir\n      FROM echecs.resultat_partie rp\n    ),\npartie_score AS (\n    SELECT p.id_partie,\n           p.id_tournoi,\n           UNNEST(ARRAY[id_blanc, id_noir]) AS id_joueuse,\n           UNNEST(ARRAY[score_blanc, score_noir]) AS score,\n           UNNEST(ARRAY[jn.elo, jb.elo]) AS elo_adversaire\n      FROM echecs.partie p\n      JOIN resultat_score USING(id_resultat)\n      JOIN echecs.joueuse jb ON (jb.id_joueuse = p.id_blanc)\n      JOIN echecs.joueuse jn ON (jn.id_joueuse = p.id_noir)\n    )\nSELECT CONCAT_WS(' ', LOWER(j.code_titre), j.nom, j.prenom) AS joueuse,\n       j.elo,\n       SUM(ps.score) AS points,\n       ROUND(AVG(ps.elo_adversaire)) AS moyenne_elo_adversaire\n  FROM echecs.joueuse j\n  JOIN partie_score ps USING(id_joueuse)\n  JOIN echecs.tournoi t USING(id_tournoi)\n WHERE t.nom = 'Open de Guingamp'\n GROUP BY j.id_joueuse,\n          joueuse,\n          j.elo\n ORDER BY points DESC,\n          moyenne_elo_adversaire DESC;\n\n\n\n\nCr√©ez une vue contenant le classement de chaque joueuse dans chaque tournoi\n\nincluez le nom du tournoi, de la joueuse, son nombre de points, la moyenne elo des adversaire\ncalculez son classement dans le tournoi (üí° voir RANK OVER PARTITION BY)\n\nAffichez la liste de toutes les gagnantes des tournois"
  },
  {
    "objectID": "doc/tp/tp4.html#qui-est-la-meilleure",
    "href": "doc/tp/tp4.html#qui-est-la-meilleure",
    "title": "Chess Unofficial Federation",
    "section": "9 Qui est la meilleure ?",
    "text": "9 Qui est la meilleure ?\n\n\n\n\n\n\nNous souhaitons calculer le pourcentage de points marqu√©s par chaque joueuse, ainsi que ses taux de victoires, matchs nuls et d√©faites.\n\n\n\nChoisissez une joueuse, par exemple Judith POLGAR\n\nEn utilisant une vue d√©j√† cr√©√©e, calculez son nombre de parties jou√©es et son nombre de points marqu√©s\nCalculez le ratio pour avoir son ratio de points par partie\nCalculez ses taux de victoires, matchs nuls et d√©faites\nAdaptez la requ√™te pour faire ces calculs pour toutes les joueuses\n\nclassez par ratio de points par partie d√©scroissant"
  },
  {
    "objectID": "doc/tp/tp4.html#arr√™tez-votre-service",
    "href": "doc/tp/tp4.html#arr√™tez-votre-service",
    "title": "Chess Unofficial Federation",
    "section": "Arr√™tez votre service",
    "text": "Arr√™tez votre service\nC‚Äôest la fin du TP, vous pouvez maintenant sauvegarder votre travail et lib√©rer les ressources r√©serv√©es :\n\nCopiez votre code et collez le sur votre machine dans un fichier .sql\n\npar exemple dans P:/Cours1A/UE3-Bases-de-donnees-relationnelles/TP4/tp4.sql\nou en t√©l√©chargeant depuis CloudBeaver le fichier sql (petit bouton avec un dossier et une fl√®che vers le bas)\n\nRetournez sur la page d‚Äôaccueil du Datalab\nAllez dans Mes Services et supprimez votre service"
  },
  {
    "objectID": "doc/tp/correction/tp3.html",
    "href": "doc/tp/correction/tp3.html",
    "title": "Nombres premiers",
    "section": "",
    "text": "def crible_eratosthene(n):\n    \"\"\"G√©n√®re une liste de bool√©ens o√π True indique qu'un nombre est premier.\"\"\"\n\n    est_premier = [True] * (n + 1)\n    est_premier[0] = est_premier[1] = False  # 0 et 1 ne sont pas premiers\n\n    for i in range(2, int(n**0.5) + 1):\n        if est_premier[i]:\n            for multiple in range(i * i, n + 1, i):\n                est_premier[multiple] = False\n\n    return est_premier\nl = crible_eratosthene(100000)\n\ncpt = 0\nfor i in l[10000:]:\n    if i:\n        cpt += 1\n\nprint(cpt)\nl[8363]"
  },
  {
    "objectID": "doc/tp/correction/tp3.html#fichier-des-communes",
    "href": "doc/tp/correction/tp3.html#fichier-des-communes",
    "title": "Nombres premiers",
    "section": "1 Fichier des communes",
    "text": "1 Fichier des communes\n\nimport pandas as pd\n\n\nimport duckdb\n\nduckdb.sql(\"\"\"\nCREATE OR REPLACE VIEW commune AS\nFROM 'https://www.insee.fr/fr/statistiques/fichier/7766585/v_commune_2024.csv';\n\"\"\")\n\n\nduckdb.sql(\"\"\"\nSELECT *\n  FROM commune\n\"\"\").to_df()\n\n\nduckdb.sql(\"\"\"\nSELECT reg\n  FROM commune\n WHERE NCC = 'MAMOUDZOU';\n\"\"\").to_df()\n\n\nduckdb.sql(\"\"\"\nSELECT COUNT(1)\n  FROM commune\n WHERE dep = '973';\n\"\"\").to_df()\n\n\nduckdb.sql(\"\"\"\nSELECT COUNT(1)\n  FROM commune\n WHERE dep IN ('02','60','80')\n   AND NCC LIKE '%L%L%L%L%';\n\"\"\").to_df()\n\n\nduckdb.sql(\"\"\"\nSELECT dep,\n       COUNT(1) AS nb_communes,\n       RANK() OVER (ORDER BY COUNT(1) DESC) AS rang\n  FROM commune\n WHERE dep IS NOT NULL\n GROUP BY dep\nHAVING nb_communes &gt;= 500\n ORDER BY 2 DESC;\n\"\"\").to_df()\n\n\nduckdb.sql(\"\"\"\nSELECT dep\n  FROM commune\n WHERE LENGTH(ncc) = (SELECT max(LENGTH(ncc))\n                        FROM commune);\n\"\"\").to_df()"
  },
  {
    "objectID": "doc/tp/correction/tp3.html#polars",
    "href": "doc/tp/correction/tp3.html#polars",
    "title": "Nombres premiers",
    "section": "2 Polars",
    "text": "2 Polars\n\nimport os\nimport polars as pl\n\ns3_endpoint = f'https://{os.environ[\"AWS_S3_ENDPOINT\"]}'\ns3_access_key = os.environ[\"AWS_ACCESS_KEY_ID\"]\ns3_secret_access_key = os.environ[\"AWS_SECRET_ACCESS_KEY\"]\ns3_session_token = os.environ[\"AWS_SESSION_TOKEN\"]\ns3_region = os.environ[\"AWS_DEFAULT_REGION\"]\n\ns3_username = os.environ[\"VAULT_TOP_DIR\"] # un peu bancal pour avoir le username\n\n\ns3_file_path = f\"s3://{s3_username}/ENSAI/SQL/tp3-longueur-fil.parquet\"\n\nstorage_options = {\n    \"aws_endpoint\":  s3_endpoint,\n    \"aws_access_key_id\": s3_access_key,\n    \"aws_secret_access_key\": s3_secret_access_key,\n    \"aws_token\": s3_session_token,\n    \"aws_region\": s3_region\n  }\n\nfile = pl.scan_parquet(source=s3_file_path, \n                     storage_options=storage_options)\n\n\ndf = file.collect()\n\n\nprint(df)\n\n\ndf.filter(pl.col(\"vetement\") == \"gilet\")"
  },
  {
    "objectID": "doc/tp/correction/tp3.html#diffusion",
    "href": "doc/tp/correction/tp3.html#diffusion",
    "title": "Nombres premiers",
    "section": "3 Diffusion",
    "text": "3 Diffusion\n\nfichier_prenoms = pl.scan_parquet(source=\"s3://ldeneuville-ensai/diffusion/ENSAI/SQL-TP/prenoms-nat2022.parquet\", \n                               storage_options=storage_options)\n\n\ntop10f2021 = fichier_prenoms\\\n    .filter((pl.col(\"sexe\") == 2) & \n            (pl.col(\"annais\") == \"2021\") & \n            (pl.col(\"preusuel\") != \"_PRENOMS_RARES\"))\\\n    .group_by(\"preusuel\")\\\n    .agg(pl.col(\"nombre\").sum().alias(\"nombre_total\"))\\\n    .sort(\"nombre_total\", descending=True)\\\n    .limit(10)\\\n    .collect()\n\n\ntop10f2021\n\n\ntop10f2021_sql = fichier_prenoms\\\n    .sql(\"\"\"\n      SELECT preusuel, \n             SUM(nombre) AS nombre_total\n        FROM self\n       WHERE preusuel &lt;&gt; '_PRENOMS_RARES'\n         AND annais = '2021'\n         AND sexe = 2\n       GROUP BY preusuel\n       ORDER BY nombre_total DESC\n       LIMIT 10\n    \"\"\")\\\n    .collect()\n\ntop10f2021_sql\n\n\nprenom = \"Katia\"\nannee_debut, annee_fin = 1960, 1980\n\ndf_prenom_annee = fichier_prenoms\\\n    .filter((pl.col(\"preusuel\") == prenom.upper()) & \n            (pl.col(\"annais\").str.to_integer(strict=False).is_not_null()) &  # Convertir et exclure les nulls\n            (pl.col(\"annais\").str.to_integer(strict=False) &gt;= annee_debut) & \n            (pl.col(\"annais\").str.to_integer(strict=False) &lt;= annee_fin))\\\n    .group_by(\"annais\")\\\n    .agg(pl.col(\"nombre\").sum().alias(\"nombre_total\"))\\\n    .sort(\"annais\")\\\n    .collect()\n\nprint(df_prenom_annee)\n\n\nfichier_prenoms.sql(f\"\"\"\nSELECT annais, \n       SUM(nombre) AS nombre_total\n  FROM self\n WHERE preusuel = 'KATIA'\n   AND annais != 'XXXX' \n   AND annais BETWEEN '{annee_debut}' AND '{annee_fin}'\n GROUP BY annais\n ORDER BY annais;\n \"\"\").collect()\n\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Set seaborn style for a cleaner, more appealing look\nsns.set_theme(style=\"whitegrid\")\n\n# Create the plot\nfig, ax = plt.subplots(figsize=(10, 6))\n\n# Data\nyears = df_prenom_annee[\"annais\"].to_list()         # Extracts years as a list\ncounts = df_prenom_annee[\"nombre_total\"].to_list()  # Extracts counts as a list\n\n# Bar plot with custom colors and transparency for better visuals\nax.bar(years, \n       counts, \n       color=\"#4C72B0\", \n       edgecolor=\"black\", \n       alpha=0.8)\n\n# Set labels and title with padding for readability\nax.set_xlabel(\"Ann√©e\", fontsize=12, labelpad=10)\nax.set_ylabel(\"Nombre d'occurences\", fontsize=12, labelpad=10)\nax.set_title(f\"Occurrences du pr√©nom {prenom} par ann√©e ({annee_debut}-{annee_fin})\", fontsize=14, pad=15)\n\n# Rotate x-axis labels, improve spacing, and format grid\nax.tick_params(axis='x', rotation=45)\nplt.tight_layout()  # Adjust layout for tight fit\n\n# Display the plot\nplt.show()"
  },
  {
    "objectID": "doc/tp/correction/tp3.html#le-pr√©nom",
    "href": "doc/tp/correction/tp3.html#le-pr√©nom",
    "title": "Nombres premiers",
    "section": "4 Le pr√©nom",
    "text": "4 Le pr√©nom\n\nprenoms_feminins = fichier_prenoms.sql(f\"\"\"\nSELECT preusuel, \n       SUM(nombre) AS nombre_total\n  FROM self\n WHERE preusuel != '_PRENOMS_RARES'\n   AND annais != 'XXXX' \n   AND sexe = 2\n   AND annais BETWEEN '1970' AND '2000'\n GROUP BY preusuel\n ORDER BY nombre_total DESC,\n          preusuel DESC;\n \"\"\").collect()\n\n\n(8363 - 3) / 5\n\n\nprenoms_feminins.row(1672)\n\n\nprenoms_feminins.with_row_index()[1670:1680]"
  },
  {
    "objectID": "doc/tp/correction/tp3.html#export",
    "href": "doc/tp/correction/tp3.html#export",
    "title": "Nombres premiers",
    "section": "5 Export",
    "text": "5 Export\n\nimport s3fs\n\nfs = s3fs.S3FileSystem(\n    client_kwargs={'endpoint_url': 'https://'+'minio-simple.lab.groupe-genes.fr'},\n    key = os.environ[\"AWS_ACCESS_KEY_ID\"], \n    secret = os.environ[\"AWS_SECRET_ACCESS_KEY\"], \n    token = os.environ[\"AWS_SESSION_TOKEN\"])\n\ndestination = f\"s3://{s3_username}/ENSAI/SQL/output.csv\"\n\nwith fs.open(destination, mode='wb') as f:\n    top10f2021.write_csv(f)"
  },
  {
    "objectID": "doc/tp/tp3.html",
    "href": "doc/tp/tp3.html",
    "title": "D√©couverte du Datalab",
    "section": "",
    "text": "Le Datalab permet aux statisticiens de d√©couvrir, d‚Äôexp√©rimenter, d‚Äôapprendre, de se former aux outils de la data.\n\n\nDans le monde professionnel, plusieurs probl√®mes se posent au statisticien :\n\nsa machine n‚Äôest pas assez puissante\ninstaller certains logiciels est parfois interdit et bloqu√© par le syst√®me\nil doit analyser des donn√©es sensibles en toute s√©curit√©\n\n√Ä l‚ÄôINSEE, un projet est n√© pour pallier √† ce besoin : Onyxia port√© par le lab de l‚ÄôINSEE.\nLa premi√®re √©tape fut de cr√©er une infrastructure Cloud avec des CPUs, des GPUs, de la RAM et du stockage.\nEnsuite, avoir plein de ressources c‚Äôest tr√®s bien, mais encore faut-il savoir les utiliser. Or lancer des services dans le cloud n√©cessite quelques comp√©tences sp√©cifiques (Docker, Kubernetes, Helm, S3‚Ä¶) qui ne sont pas √† la port√©e de tous.\nD‚Äôo√π l‚Äôid√©e de cr√©er une interface graphique pour pouvoir lancer des services en quelques clics. Onyxia s‚Äôappuie sur des technologies sous-jacentes (Kubernetes, Helm, S3‚Ä¶) pour proposer une IHM agr√©able pour le datascientist. Cependant, la philosophie du projet Onyxia est d‚Äô√™tre une brique qui facilite le travail sans se rendre indispensable. L‚Äôid√©e est d‚Äô√©viter que les utilisateurs ne s‚Äôenferment dans un choix technologique et qu‚Äôil soit couteux d‚Äôen sortir.\n√Ä l‚ÄôINSEE, une instance de ce logiciel a √©t√© install√©e sur le Datalab SSP Cloud, ouverte √† tous les agents publics. Vous pouvez y cr√©er un compte car c‚Äôest √©galement ouvert √† tous les √©l√®ves de l‚ÄôENSAI (en utilisant votre mail ENSAI).\n\n\n\n\n\n\nWarning\n\n\n\nNe d√©posez pas de donn√©es sensibles sur cette instance, ni sur celle du GENES.\nPour celles et ceux qui iront √† l‚ÄôINSEE, une autre instance nomm√©e LS3 n‚Äôest accessible qu‚Äôen interne et autorise l‚Äôutilisation de donn√©es sensibles.\n\n\nOnyxia est un logiciel Libre et Open Source. Chacun peut installer sa propre instance sur son infra. C‚Äôest ce qu‚Äôont fait de nombreux organismes, ainsi que le GENES.\n\n\n\n\nLe principe est d‚Äôoffrir aux utilisateurs la possibilit√© de lancer de nombreux services √† la demande (Jupyter, Rstudio, VSCode, PostgreSQL‚Ä¶) avec une puissance de calcul adapt√©e aux besoins.\n\n\n\n\n\n\nCaution\n\n\n\nCes services sont √©ph√©m√®res, car si les ressources sont importantes, il faut savoir les partager !\nLe principe g√©n√©ral est le suivant :\n\nVous lancez votre service en r√©servant des ressources (CPU, GPU, RAM, Stockage)\nVous effectuez votre travail\nVous sauvegardez votre code (git) et vos r√©sultats (MinIO)\nVous supprimez votre service et lib√©rez les ressources"
  },
  {
    "objectID": "doc/tp/tp3.html#introduction",
    "href": "doc/tp/tp3.html#introduction",
    "title": "D√©couverte du Datalab",
    "section": "",
    "text": "Le Datalab permet aux statisticiens de d√©couvrir, d‚Äôexp√©rimenter, d‚Äôapprendre, de se former aux outils de la data.\n\n\nDans le monde professionnel, plusieurs probl√®mes se posent au statisticien :\n\nsa machine n‚Äôest pas assez puissante\ninstaller certains logiciels est parfois interdit et bloqu√© par le syst√®me\nil doit analyser des donn√©es sensibles en toute s√©curit√©\n\n√Ä l‚ÄôINSEE, un projet est n√© pour pallier √† ce besoin : Onyxia port√© par le lab de l‚ÄôINSEE.\nLa premi√®re √©tape fut de cr√©er une infrastructure Cloud avec des CPUs, des GPUs, de la RAM et du stockage.\nEnsuite, avoir plein de ressources c‚Äôest tr√®s bien, mais encore faut-il savoir les utiliser. Or lancer des services dans le cloud n√©cessite quelques comp√©tences sp√©cifiques (Docker, Kubernetes, Helm, S3‚Ä¶) qui ne sont pas √† la port√©e de tous.\nD‚Äôo√π l‚Äôid√©e de cr√©er une interface graphique pour pouvoir lancer des services en quelques clics. Onyxia s‚Äôappuie sur des technologies sous-jacentes (Kubernetes, Helm, S3‚Ä¶) pour proposer une IHM agr√©able pour le datascientist. Cependant, la philosophie du projet Onyxia est d‚Äô√™tre une brique qui facilite le travail sans se rendre indispensable. L‚Äôid√©e est d‚Äô√©viter que les utilisateurs ne s‚Äôenferment dans un choix technologique et qu‚Äôil soit couteux d‚Äôen sortir.\n√Ä l‚ÄôINSEE, une instance de ce logiciel a √©t√© install√©e sur le Datalab SSP Cloud, ouverte √† tous les agents publics. Vous pouvez y cr√©er un compte car c‚Äôest √©galement ouvert √† tous les √©l√®ves de l‚ÄôENSAI (en utilisant votre mail ENSAI).\n\n\n\n\n\n\nWarning\n\n\n\nNe d√©posez pas de donn√©es sensibles sur cette instance, ni sur celle du GENES.\nPour celles et ceux qui iront √† l‚ÄôINSEE, une autre instance nomm√©e LS3 n‚Äôest accessible qu‚Äôen interne et autorise l‚Äôutilisation de donn√©es sensibles.\n\n\nOnyxia est un logiciel Libre et Open Source. Chacun peut installer sa propre instance sur son infra. C‚Äôest ce qu‚Äôont fait de nombreux organismes, ainsi que le GENES.\n\n\n\n\nLe principe est d‚Äôoffrir aux utilisateurs la possibilit√© de lancer de nombreux services √† la demande (Jupyter, Rstudio, VSCode, PostgreSQL‚Ä¶) avec une puissance de calcul adapt√©e aux besoins.\n\n\n\n\n\n\nCaution\n\n\n\nCes services sont √©ph√©m√®res, car si les ressources sont importantes, il faut savoir les partager !\nLe principe g√©n√©ral est le suivant :\n\nVous lancez votre service en r√©servant des ressources (CPU, GPU, RAM, Stockage)\nVous effectuez votre travail\nVous sauvegardez votre code (git) et vos r√©sultats (MinIO)\nVous supprimez votre service et lib√©rez les ressources"
  },
  {
    "objectID": "doc/tp/tp3.html#objectifs",
    "href": "doc/tp/tp3.html#objectifs",
    "title": "D√©couverte du Datalab",
    "section": "Objectifs",
    "text": "Objectifs\nCe TP d‚Äôinitiation va vous permettre de :\n\nLancer vos premiers services\nVous familiariser avec l‚Äôespace de stockage S3\nConfigurer votre compte sur le datalab\n\n\n\n\n\n\n\nFil rouge\n\n\n\nVos coll√®gues Josette et F√©lix attendent un heureux √©v√©nement. Ils avaient trouv√© le pr√©nom id√©al pour leur enfant √† na√Ætre.\nCependant, un malencontreux accident de fer √† repasser les a rendu amn√©siques tous les deux.\nVotre mission, si vous l‚Äôacceptez, est de retrouver ce fameux pr√©nom. Pour cela, vous allez devoir explorer les fonctionnalit√©s du Datalab."
  },
  {
    "objectID": "doc/tp/tp3.html#se-connecter",
    "href": "doc/tp/tp3.html#se-connecter",
    "title": "D√©couverte du Datalab",
    "section": "1 Se connecter",
    "text": "1 Se connecter\nVous pouvez r√©aliser ce TP soit sur :\n\nLe Datalab du GENES\nLe Datalab SSPCloud de l‚ÄôINSEE\n\nsi besoin de cr√©er un compte, utilisez votre mail ENSAI"
  },
  {
    "objectID": "doc/tp/tp3.html#lancer-un-service",
    "href": "doc/tp/tp3.html#lancer-un-service",
    "title": "D√©couverte du Datalab",
    "section": "2 Lancer un service",
    "text": "2 Lancer un service\n\n\n\n\n\n\nFil rouge\n\n\n\nAvant de partir √† la recherche du pr√©nom, Josette a une envie de doubitchou.\nVous retrouvez la recette, mais il vous manque la quantit√© exacte en grammes de margarine.\nVous savez simplement que la valeur recherch√©e correspond √† combien il y a de nombres premiers entre 10 000 et 100 000.\nNaturellement, vous vous dites que la solution la plus simple est de cr√©er un programme Python pour trouver la r√©ponse. Or, Python n‚Äôest pas install√© sur votre machine et vous ne savez pas comment faire‚Ä¶ Mais alors : pourquoi ne pas lancer un service du Datalab qui permet d‚Äôex√©cuter du Python.\n\n\n\n2.1 Un premier service\n\nAllez dans Catalogue de services\nS√©lectionnez le service Jupyter-python, puis cliquez deux fois sur Lancer\n\nAttendez quelques secondes le temps que le service se lance.\n\nCliquez pour copier le mot de passe\nCliquez sur Ouvrir le service üöÄ\n\npassword : collez le mot de passe\n\n\nVotre service Jupyter Python s‚Äôouvre.\n\n\n\n\n\n\nCe qu‚Äôil se passe sous le capot\n\n\n\n\n\nPour plus de d√©tails, vous pouvez consulter la vid√©o en bas de la page.\nPrenons l‚Äôexemple de ce qu‚Äôil se passe en arri√®re plan lorsque vous lancez un service Vscode-python :\n\nConstruction de l‚Äôimage Docker\nUne image Docker est un paquet l√©ger et autonome qui contient tout le n√©cessaire pour ex√©cuter une application : le code, les biblioth√®ques, les d√©pendances, les variables d‚Äôenvironnement et les fichiers de configuration.\nLes images Docker permettent de cr√©er des environnements isol√©s et coh√©rents, garantissant ainsi la portabilit√© et la reproductibilit√© des applications.\n\nNous partons de l‚Äôimage de base d‚ÄôOnyxia\n\nubuntu:22.04 et quelques √©l√©ments de config\n\nNous ajoutons la couche python-minimal\n\ninstallation de python et quelques packages classiques\n\nNous ajoutons la couche python-datascience\n\nJulia, Quarto et des packages de datascience (numpy, pandas‚Ä¶)\n\nNous ajoutons la couche vscode\n\nInstallation de Visual Studio Code et configuration\n\n\nVous avez maintenant une image Docker avec tout ce qu‚Äôil faut pour bien travailler.\n\n\nDockerHub\nCette image est construite et d√©pos√©e sur DockerHub onyxia-vscode-python.\nNous allons ensuite lancer une instance de cette image : un conteneur.\nUne image est comme un moule, et un conteneur est un objet fabriqu√© √† partir de ce moule. L‚Äôimage contient les instructions, et le conteneur est l‚Äôinstance concr√®te cr√©√©e √† partir de ce mod√®le. Vous verrez le m√™me principe dans le cours de POO avec les classes (mod√®les) et les objets (instances)\nPour g√©rer tous les conteneurs lanc√©s sur le datalab, nous avons besoin d‚Äôun orchestrateur : Kubernetes.\n\n\nChart Helm\nCependant, nous allons d‚Äôabord utiliser Helm pour faciliter le d√©ploiement.\nHelm simplifie le processus de d√©ploiement d‚Äôapplications sur Kubernetes en automatisant les t√¢ches r√©p√©titives et en fournissant une gestion centralis√©e des configurations.\nLe chart Helm vscode-python est un ensemble de fichiers de configuration qui facilite le d√©ploiement d‚Äôapplication dans un envrionnement Kubernetes.\n\n\nD√©ploiement sur Kube\nKubernetes (K8s) est un syst√®me open-source qui automatise le d√©ploiement, la mise √† l‚Äô√©chelle et la gestion d‚Äôapplications conteneuris√©es. C‚Äôest un orchestrateur de conteneurs.\nK8s r√©cup√©re via le chart Helm toutes les infos n√©cessaires et d√©ploie le conteneur (cr√©√© √† partir de l‚Äôimage Docker) sur l‚Äôinfra du datalab.\n\n\n\n\n\nCr√©ez un Notebook Python\n\nFile ‚û°Ô∏è New ‚û°Ô∏è Notebook\n\nDans la cellule, √©crivez un code Python qui permet de compter combien il y a de nombres premiers entre 10 000 et 100 000\n\nPour vous aider, vous pouvez utiliser cette fonction qui g√©n√©re une liste de bool√©ens.\ndef crible_eratosthene(n) -&gt; list[bool]:\n    \"\"\"G√©n√®re une liste de bool√©ens o√π True indique qu'un nombre est premier.\"\"\"\n\n    est_premier = [True] * (n + 1)\n    est_premier[0] = est_premier[1] = False  # 0 et 1 ne sont pas premiers\n\n    for i in range(2, int(n**0.5) + 1):\n        if est_premier[i]:\n            for multiple in range(i * i, n + 1, i):\n                est_premier[multiple] = False\n\n    return est_premier\n\n\n\n\n\n\nTip\n\n\n\nN‚Äôh√©sitez pas √† cr√©er plusieurs cellules pour d√©couper votre code (petites icones avec des +)\n\n\nComme vous √™tes un as de la programmation, cela ne vous prend que trois minutes. C‚Äôest beaucoup plus rapide que si vous aviez du installer Python, ainsi qu‚Äôun environnement d‚Äôex√©cution.\n\nV√©rifiez que le r√©sultat est lui m√™me un nombre premier\n\nNotez le vous en aurez besoin √† la fin\n\n\n\n\n2.2 Utiliser des donn√©es\n\n\n\n\n\n\nFil rouge\n\n\n\nVous vous rendez compte qu‚Äôil faut plus de 8 kg de margarine et que vous n‚Äôen avez pas assez dans le frigo.\nF√©lix propose d‚Äôaller en chercher √† la superette du coin. Il entre dans l‚Äôascenseur pour descendre les 6 √©tages et patatra, il se retrouve bloqu√©.\nPour retrouver les 5 chiffres du num√©ro du d√©panneur, vous allez devoir r√©pondre √† 5 questions en requ√™tant le fichier des communes fran√ßaises.\n\n\n\n\n\n\n\n\nCOG\n\n\n\nChaque ann√©e, l‚ÄôINSEE publie sur son site le Code officiel g√©ographique (COG).\nCe r√©f√©rentiel regroupe, au 1er janvier, les codes et libell√©s des communes, cantons, arrondissements, d√©partements, r√©gions, ainsi que ceux des pays et territoires √©trangers.\n\n\nVous allez utiliser via DuckDB du SQL dans du code Python. Commencez par importer le package et cr√©er la vue vers le fichier des communes 2024.\nimport duckdb\n\nduckdb.sql(\"\"\"\nCREATE OR REPLACE VIEW commune AS\nFROM 'https://www.insee.fr/fr/statistiques/fichier/7766585/v_commune_2024.csv';\n\"\"\")\nPour ex√©cuter une requ√™te :\nduckdb.sql(\"\"\"\nSELECT *\n  FROM commune\n\"\"\")\n\n\n\n\n\n\nTip\n\n\n\nPour avoir un affichage plus joli, vous pouvez convertir la sortie en du dataframe pandas avec la m√©thode to_df().\nimport pandas as pd\n\nduckdb.sql(\"\"\"\nSELECT *\n  FROM commune\n\"\"\").to_df()\n\n\n\nQuel est le code r√©gion de Mayotte ?\nCombien de communes y a-t-il en Guyane ?\nParmi les 3 d√©partements de la Picardie (Aisne, Oise, Somme), combien de communes ont au minimum 4 L dans leur nom ?\nAffichez le nombre de communes par d√©partement\n\nClassez par nombre de communes d√©croissant\nQuel est le num√©ro du d√©partement se classant au 20e rang ?\n\nQuel est le num√©ro du d√©partement dans lequel se trouve le nom de commune le plus long\n\n\n\n\n\n\n\nTip\n\n\n\n\n\n\nLa somme des 5 nombres vaut 149\nLes nombres sont dans l‚Äôordre croissant\n\n\n\n\nVous venez ici d‚Äôutiliser des donn√©es disponibles sur internet. Vous pouvez √©galement effectuer des traitements sur vos propres donn√©es en les stockant sur S3."
  },
  {
    "objectID": "doc/tp/tp3.html#stockage-s3",
    "href": "doc/tp/tp3.html#stockage-s3",
    "title": "D√©couverte du Datalab",
    "section": "3 Stockage S3",
    "text": "3 Stockage S3\n\n\n\n\n\n\nD√©finition\n\n\n\nS3 : Simple Storage System.\nInvent√© par Amazon, ce syst√®me de stockage est devenu l‚Äôoutil standard du march√© pour le stockage en ligne.\nMinIO est une solution alternative de stockage d‚Äôobjets open-source qui permet de d√©ployer facilement un stockage √©volutif et performant. Elle est compatible avec l‚ÄôAPI S3 d‚ÄôAmazon, ce qui facilite l‚Äôint√©gration avec les applications existantes.\nPour faire simple, vous pouvez vous dire que c‚Äôest comme si vous allez stocker vos fichiers dans un Drive.\n\n\nLorsque l‚Äôon travaille dans le cloud, il est essentiel de s√©parer les donn√©es des programmes pour :\n\nmieux g√©rer les ressources\nrenforcer la s√©curit√© en limitant les acc√®s et les permissions\npermettre une scalabilit√© ind√©pendante des composants\n\nMinIO offre :\n\nune haute disponibilit√©\nune s√©curit√© renforc√©e gr√¢ce au chiffrement des donn√©es et des contr√¥les d‚Äôacc√®s\ndes performances √©lev√©es, particuli√®rement adapt√©es aux environnements n√©cessitant un acc√®s rapide aux donn√©es, comme le Big Data et l‚Äôintelligence artificielle\n\n\n3.1 Votre bucket\n\n\n\n\n\n\nD√©finition\n\n\n\nUn bucket est un conteneur de stockage utilis√© pour regrouper des objets (fichiers et m√©tadonn√©es) dans des syst√®mes de stockage de type cloud. Il facilite l‚Äôorganisation, la gestion des permissions et l‚Äôacc√®s aux donn√©es dans un espace de stockage structur√©.\n\n\nLors de votre cr√©ation de compte, un bucket est cr√©√© avec votre nom d‚Äôutilisateur. Dans ce bucket, vous pouvez :\n\ncr√©er / supprimer des dossiers\nimporter / supprimer des fichiers\n\nVous avez plusieurs possibilit√©s pour g√©rer √† votre stockage :\n\nDepuis le Datalab, onglet Mes fichiers\nDepuis la console MinIO :\n\nhttps://minio-console.lab.sspcloud.fr/\nhttps://minio-simple.lab.groupe-genes.fr\n\nDepuis un terminal avec le client Minio\n\n\n\n3.2 Stocker vos fichiers\n\n\n\n\n\n\nFil rouge\n\n\n\nF√©lix est sauv√©, il peut maintenant aller chercher de la margarine et du papier cadeau (√ßa peut toujours servir).\nEn attendant, Josette s‚Äôoccupe en confectionnant un superbe gilet gris avec son amie Th√©r√®se.\nElle se souvient qu‚Äôelle a not√© quelque part la longueur de fil n√©cessaire dans un fichier csv.\n\n\n\nT√©l√©chargez ce fichier parquet\n\nEnsuite, allez sur la page d‚Äôaccueil du Datalab :\n\nAllez dans Mes fichiers\nCr√©ez un dossier ENSAI puis √† l‚Äôint√©rieur un dossier SQL\nT√©l√©versez votre fichier parquet dans le dossier SQL\n\n\n\n\n\n\n\nChemin vers mes fichiers\n\n\n\nVous remarquerez √† droite, des lignes de commande du type mc cp tp3-longueur-fil.parquet s3/&lt;username&gt;/ENSAI/SQL/tp3-longueur-fil.parquet.\nCe sont des commandes pour interagir avec votre stockage depuis un terminal (voir ci-apr√®s).\nCependant, vous pouvez extraire de ces commandes une information int√©ressante : le chemin vers votre fichier : s3/&lt;username&gt;/ENSAI/SQL/tp3-longueur-fil.parquet.\n\n\nVous venez de charger un fichier, voyons maintenant comment y acc√©der dans un Service, en utilisant par exemple le notebook que vous avez d√©j√† lanc√©.\n\n\n3.3 Utiliser des donn√©es\nSur la page d‚Äôaccueil du Datalab :\n\nAllez dans Mon Compte, puis dans l‚Äôonglet Connexion au Stockage\n\nVous trouverez ici des informations pour vous connecter au stockage selon le language que vous utilisez : Python, R‚Ä¶\nD‚Äôailleurs pour chaque langage, il y a m√™me plusieurs packages qui font le job. Par exemple s3fs ou boto3 pour Python.\nRetournez dans votre service Notebook Jupyter :\n\nCr√©ez un nouveau Notebook\n\nvous pouvez par exemple le nommer S3.ipynb\n\nCr√©er 2 cellules, puis collez et ex√©cutez les 2 blocs de code ci-dessous\n\nCommencez par importer les packages n√©cessaires et r√©cup√©rer les valeurs des variables d‚Äôenvironnement pour pouvoir se connecter √† votre stockage.\nimport os\nimport polars as pl\n\ns3_endpoint = f'https://{os.environ[\"AWS_S3_ENDPOINT\"]}'\ns3_access_key = os.environ[\"AWS_ACCESS_KEY_ID\"]\ns3_secret_access_key = os.environ[\"AWS_SECRET_ACCESS_KEY\"]\ns3_session_token = os.environ[\"AWS_SESSION_TOKEN\"]\ns3_region = os.environ[\"AWS_DEFAULT_REGION\"]\n\ns3_username = os.environ[\"VAULT_TOP_DIR\"] # un peu bancal pour avoir le username\n\n\n\n\n\n\nWarning\n\n\n\nLes cl√©s et les jetons ont une dur√©e de vie limit√©e.\nSi vous laissez votre service ouvert trop longtemps (pas bien !), vos cl√©s et jetons pourraient √™tre expir√©s.\nDans ce cas, vous pouvez recharger en dur les nouvelles valeurs (voir Mon Compte &gt; Connexion au Stockage).\n\n\nD√©finissez le chemin o√π se trouve votre fichier et lisez le avec Polars.\ns3_file_path = f\"s3://{s3_username}/ENSAI/SQL/tp3-longueur-fil.parquet\"\n\nstorage_options = {\n    \"aws_endpoint\":  s3_endpoint,\n    \"aws_access_key_id\": s3_access_key,\n    \"aws_secret_access_key\": s3_secret_access_key,\n    \"aws_token\": s3_session_token,\n    \"aws_region\": s3_region\n  }\n\nfile = pl.scan_parquet(source=s3_file_path, \n                     storage_options=storage_options)\n\n\n\n\n\n\nPolars\n\n\n\nPolars est une biblioth√®que rapide et performante pour la manipulation de donn√©es en Python et Rust, optimis√©e pour les grands volumes de donn√©es.\nContrairement √† Pandas, Polars utilise une approche orient√©e colonnes (columnar) et tire parti du traitement parall√®le, ce qui le rend particuli√®rement adapt√© pour les op√©rations analytiques lourdes.\nSa syntaxe, proche de celle de Pandas, permet des transformations, agr√©gations et manipulations de donn√©es avec des m√©thodes performantes et expressives.\nPour plus de d√©tails : https://ssphub.netlify.app/post/polars/\n\n\n\nCr√©ez une troisi√®me cellule et affichez le fichier charg√©\n\nQue se passe-t-il ?\n\n\n\n\n\n\n\n\nMode Lazy\n\n\n\nVous avez appel√© la m√©thode scan_parquet() qui correspond au mode Lazy de Polars.\nLe mode Lazy signifie que Polars va accumuler toutes les instructions que vous lui donnez sans pour autant les ex√©cuter tout de suite.\nMais quel est l‚Äôint√©r√™t ?\nImaginons que vous √™tes en train d‚Äôanaliser un tr√©s gros fichier et que vous enchainez √† la suite diverses op√©rations (filtres, s√©lections de colonnes, regroupements, agr√©gations, tri‚Ä¶), deux choix s‚Äôoffrent √† vous :\nOption 1 (mode Eager : pl.read_parquet()):\n\nvous chargez tout le fichier en RAM (dans la m√©moire de votre machine)\nvous appliquez des op√©rations dans n‚Äôimporte quel ordre\nvous lancez, c‚Äôest long et √ßa rame‚Ä¶\n\nOption 2 (mode Lazy : pl.scan_parquet()):\n\nvous scannez le fichier, i.e.¬†analyser sa structure (types de colonnes) et ses m√©tadonn√©es\nvous donnez vos op√©rations dans n‚Äôimporte quel ordre\n√† la fin, vous demandez √† Polars de vous fournir le r√©sultat\n√† ce moment, Polars va optimiser l‚Äôordre des traitements en utilisant son propre plan d‚Äôex√©cution et vous donner une r√©ponse beaucoup plus rapide\n\nEn r√©sum√©, en mode Eager, √† chaque √©tape la machine effectue b√™tement tous les calculs que vous lui demandez. En mode Lazy, la machine liste les op√©rations que vous demandez. Puis lorsque vous exigez un r√©sultat, l‚Äôordre des op√©rations est optimis√© et la r√©ponse est beaucoup plus rapide.\n\n\n\nPour demander le chargement du fichier, appelez la m√©thode collect()\n\nstockez le r√©sultat dans une variable df\n\nVous pouvez maintenant afficher le contenu de df avec un print\n\nEn appelant la m√©thode collect(), vous avez ¬´ forc√© ¬ª Polars √† charger les donn√©es en m√©moire.\n\nAppliquez au dataframe la m√©thode filter() pour trouver la longueur de fil du gilet\n\ndf.filter(pl.col(\"&lt;column_name&gt;\") == \"&lt;value&gt;\")\n\n\n\n\n3.4 Donn√©es d‚Äôautres utilisateurs\n\n\n\n\n\n\nFil rouge\n\n\n\nPendant que Josette confectionne son gilet, F√©lix revient avec la margarine.\nOr, Josette n‚Äôa finalement plus faim. F√©lix se met alors √† bouder et va s‚Äôenfermer dans les toilettes pour avaler des pilules qu‚Äôil a prises au passage √† la pharmacie. Soudain, la m√©moire lui revient !\nIl se rappelle qu‚Äôils avaient trouv√© le pr√©nom en parcourant‚Ä¶ Le fichier des pr√©noms !\n\n\nCe fichier est stock√© sur le bucket d‚Äôun autre utilisateur √† l‚Äôune des adresses suivante :\n\nSSP Cloud : s3://ludo2ne/diffusion/ENSAI/SQL-TP/prenoms-nat2022.parquet\nDatalab du GENES : s3://ldeneuville-ensai/diffusion/ENSAI/SQL-TP/prenoms-nat2022.parquet\n\n\n\n\n\n\n\nImportant\n\n\n\nMalheureusement sur le Datalab du GENES, la fonctionnalit√© n‚Äôest pas encore impl√©ment√©e sur le Datalab du GENES.\nLes dossiers diffusion de chaque utilisateur ne sont pas accessibles en lecture.\nCe n‚Äôest plus trop dans la philosophie de l‚Äôexercice, mais pour contourner le probl√®me :\n\nT√©l√©chargez le fichier des prenoms\nStockez le sur votre S3\nUtilisez ce fichier pour la suite\n\n\n\n\n\n\n\n\n\nDiffusion\n\n\n\n√Ä la racine de votre Bucket, vous pouvez cr√©er un dossier nomm√© diffusion.\nVous pourrez alors stocker √† l‚Äôint√©rieur les dossiers et fichiers que vous souhaitez partager aux autres utilisateurs. Ils auront un droit d‚Äôacc√®s en lecture sur votre dossier diffusion.\n\n\n\nScannez ce fichier avec Polars\n\nstockez-le dans une variable nomm√©e fichier_prenoms\n\nUtilisez le code ci-dessous pour afficher le top10 des pr√©noms f√©minins en 2022\n\ntop10f2021 = fichier_prenoms\\\n    .filter((pl.col(\"sexe\") == 2) & \n            (pl.col(\"annais\") == \"2021\") & \n            (pl.col(\"preusuel\") != \"_PRENOMS_RARES\"))\\\n    .group_by(\"preusuel\")\\\n    .agg(pl.col(\"nombre\").sum().alias(\"nombre_total\"))\\\n    .sort(\"nombre_total\", descending=True)\\\n    .limit(10)\\\n    .collect()\n\nVous pouvez effectuez les m√™mes traitements en encapsulant du sql :\n\ntop10f2021_sql = fichier_prenoms\\\n    .sql(\"\"\"\n      SELECT preusuel, \n             SUM(nombre) AS nombre_total\n        FROM self\n       WHERE preusuel &lt;&gt; '_PRENOMS_RARES'\n         AND annais = '2021'\n         AND sexe = 2\n       GROUP BY preusuel\n       ORDER BY nombre_total DESC\n       LIMIT 10\n    \"\"\")\\\n    .collect()\n\n\n\n\n\n\nFil rouge\n\n\n\nAlors que vous alliez chercher le pr√©nom, votre camarade Katia vous demande en quelle ann√©e son pr√©nom a √©t√© le plus donn√© entre 1960 et 1980.\n\n\n\n√âcrivez la requ√™te SQL qui fait le m√™me travail que les instructions ci-dessous\n\nprenom = \"Katia\"\nannee_debut, annee_fin = 1960, 1980\n\ndf_prenom_annee = fichier_prenoms\\\n    .filter((pl.col(\"preusuel\") == prenom.upper()) & \n            (pl.col(\"annais\").str.to_integer(strict=False).is_not_null()) & \n            (pl.col(\"annais\").str.to_integer(strict=False) &gt;= annee_debut) & \n            (pl.col(\"annais\").str.to_integer(strict=False) &lt;= annee_fin))\\\n    .group_by(\"annais\")\\\n    .agg(pl.col(\"nombre\").sum().alias(\"nombre_total\"))\\\n    .sort(\"annais\")\\\n    .collect()\n\nprint(df_prenom_annee)\n\n\n\n\n\n\nDiagramme en barre\n\n\n\n\n\nVous pouvez √©galement tracer un graphique avec ces donn√©es :\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Set seaborn style for a cleaner, more appealing look\nsns.set_theme(style=\"whitegrid\")\n\n# Create the plot\nfig, ax = plt.subplots(figsize=(10, 6))\n\n# Data\nyears = df_prenom_annee[\"annais\"].to_list()         # Extracts years as a list\ncounts = df_prenom_annee[\"nombre_total\"].to_list()  # Extracts counts as a list\n\n# Bar plot with custom colors and transparency for better visuals\nax.bar(years, \n       counts, \n       color=\"#4C72B0\", \n       edgecolor=\"black\", \n       alpha=0.8)\n\n# Set labels and title with padding for readability\nax.set_xlabel(\"Ann√©e\", fontsize=12, labelpad=10)\nax.set_ylabel(\"Nombre d'occurences\", fontsize=12, labelpad=10)\nax.set_title(f\"Occurrences du pr√©nom {prenom} par ann√©e ({annee_debut}-{annee_fin})\", fontsize=14, pad=15)\n\n# Rotate x-axis labels, improve spacing, and format grid\nax.tick_params(axis='x', rotation=45)\nplt.tight_layout()  # Adjust layout for tight fit\n\n# Display the plot\nplt.show()\n\n\n\nNous y sommes presque ! Pour trouver le fameux pr√©nom :\n\nReprenez le r√©sultat du nombre de nombres premiers entre 10 000 et 100 000\nOtez 3\nDivisez par 5\n\nLe pr√©nom recherch√© est √† ce rang de classement pour les pr√©noms f√©minins donn√©s en France entre 1970 et 2000.\n\n√âcrivez la requ√™te\n\nFiltrez les pr√©noms f√©minins donn√©s entre 1970 et 2000\nClassez-les par le nombre de fois o√π ils ont √©t√© donn√© d√©croissant et pr√©nom d√©croissant\n\nTrouvez le pr√©nom class√© au rang demand√©\n\nVous pouvez utiliser ce code : &lt;df&gt;.with_row_index()[&lt;index_inf&gt;:&lt;index_sup&gt;]\n\n\n\n\n\n\n\n\nTip\n\n\n\n\n\nCe n‚Äôest pas encore impl√©ment√© dans Polars, mais il est possible en SQL de g√©n√©rer les rangs : RANK() OVER (ORDER BY SUM(nombre) DESC) AS rang.\nLa r√©ponse :\n\nCommence par un S\nMonsieur et Madame Hier ont une fille, comment s‚Äôappelle-t-elle ?\n\n\n\n\n\n\n3.5 Exportez vos r√©sultats vers MinIO\nVous pouvez √©galement exporter vos fichiers vers S3.\nNous allons utiliser ici la librairie s3fs.\n\nCollez et lancez ce code :\nimport s3fs\n\nfs = s3fs.S3FileSystem(\n    client_kwargs={'endpoint_url': 'https://'+'minio-simple.lab.groupe-genes.fr'},\n    key = os.environ[\"AWS_ACCESS_KEY_ID\"], \n    secret = os.environ[\"AWS_SECRET_ACCESS_KEY\"], \n    token = os.environ[\"AWS_SESSION_TOKEN\"])\n\ndestination = f\"s3://{s3_username}/ENSAI/SQL/output.csv\"\n\nwith fs.open(destination, mode='wb') as f:\n    top10f2021.write_csv(f)\nSur le Datalab, allez dans Mes fichiers ‚û°Ô∏è ENSAI ‚û°Ô∏è SQL\n\nle fichier output.csv a √©t√© g√©n√©r√©\nrafraichissez la page si besoin\n\nDouble-cliquez sur ce fichier pour en avoir un aper√ßu\n\n\nPour plus de d√©tails sur le stockage des fichiers sur S3 :\n\nLes donn√©es sur le cloud , Python pour la data science, Lino Galiana"
  },
  {
    "objectID": "doc/tp/tp3.html#lib√©rer-les-ressources",
    "href": "doc/tp/tp3.html#lib√©rer-les-ressources",
    "title": "D√©couverte du Datalab",
    "section": "Lib√©rer les ressources",
    "text": "Lib√©rer les ressources\nUne fois vos travaux termin√©s, il est temps de lib√©rer les ressources r√©serv√©es.\n\nSi besoin, sauvegardez vos notebooks\n\nclic droit sur le nom du fichier ‚û°Ô∏è Download\n\nPuis sur la page d‚Äôaccueil, allez dans Mes services, mettez votre service √† la poubelle\n\nVous pouvez ais√©ment reproduire votre travail plus tard :\n\nVotre code est t√©l√©charg√©\nVos donn√©es sont toujours sur MinIO\nIl suffit de relancer un nouveau service et de relancer les calculs\n\nUne mani√®re plus propre de travailler est d‚Äôutiliser git pour versionner son code."
  },
  {
    "objectID": "doc/tp/tp3.html#fin-du-tp",
    "href": "doc/tp/tp3.html#fin-du-tp",
    "title": "D√©couverte du Datalab",
    "section": "Fin du TP",
    "text": "Fin du TP\nLe but de ce TP √©tait de vous faire d√©couvrir les fonctionnalit√©s de base du Datalab et les bonnes pratiques de travail dans un environnement Cloud.\n\n\n\n\n\n\nImportant\n\n\n\nLa suite du TP est optionnelle.\nElle est simplement donn√©e pour celles et ceux qui souhaient aller plus loin et profiter de toutes les fonctionnalit√©s du Datalab.\n\n\n\nBesoin d‚Äôassistance ?\n\nContactez l‚Äô√©quipe du SSP Cloud sur Slack\nPour le Datalab du GENES, vous trouverez sur la page d‚Äôaccueil un lien pour rejoindre le canal Teams\n\n\n\nPour aller plus loin\nUne pr√©sentation compl√®te du projet Onyxia au Devoxx 2023, de sa philosophie et de son fonctionnement par Olivier LEVITT, Joseph GARRONE et Fr√©d√©ric COMTE.\n\nUne pr√©sentation plus courte\n\nD‚Äôautres videos sur la page GitHub du projet\n\n\nBibliographie\n\nUtiliser RStudio sur l‚Äôenvironnement SSP Cloud, UtilitR\nFormations et tutoriels du SSP Cloud\n\nNombreux tutos : Python, R, ML, Spark, Cartographie\n\nDoc SSP Cloud\nPrincipes du Datalab\nD√©couverte d‚ÄôOnyxia et de son datalab SSP Cloud, Nathan Randriamanana"
  },
  {
    "objectID": "doc/tp/tp3.html#travailler-avec-git",
    "href": "doc/tp/tp3.html#travailler-avec-git",
    "title": "D√©couverte du Datalab",
    "section": "4 Travailler avec Git",
    "text": "4 Travailler avec Git\n\n\n\n\n\n\nCaution\n\n\n\nSur le datalab, vos services ont une dur√©e de vie limit√©e.\nPour sauvegarder vos programmes, la bonne pratique est d‚Äôutiliser un d√©p√¥t git. Nous allons donc cr√©er et utiliser un jeton pour communiquer avec GitHub.\nPour suivre la d√©marche, il faut disposer d‚Äôun compte GitHub. Il est possible de suivre une d√©marche similaire avec GitLab.\n\n\n\n4.1 G√©n√©rer un token GitHub\n\n\n\n\n\n\nD√©j√† fait ?\n\n\n\nSi vous avez d√©j√† g√©n√©r√© et d√©clar√© un jeton GitHub, inutile de refaire ces 2 √©tapes.\n\n\n\nConnectez-vous √† votre compte GitHub\nAllez dans settings ‚û°Ô∏è Developer settings ‚û°Ô∏è Personal access tokens ‚û°Ô∏è Tokens (classic)\nG√©n√©rez un nouveau jeton classique\n\nRenseigner :\n\nnom du token : Datalab GENES\ndate d‚Äôexpiration ‚û°Ô∏è Custom ‚û°Ô∏è 1 an\n\n‚úÖ Cochez repo\nCliquez sur Generate token\nCopiez ce jeton commen√ßant par ghp_ et gardez le pr√©cieusement de c√¥t√© quelques minutes\n\n\n\n\n\n\n\n\nWarning\n\n\n\n\nCe jeton ne sera visible qu‚Äôune seule fois\nsi vous le perdez ou s‚Äôil est expir√©, il faut en g√©n√©rer un nouveau\n\n\n\n\n\n4.2 D√©clarer votre jeton\nGitHub vous a fournit un jeton. Il faut maintenant le d√©clarer sur le Datalab :\n\nAllez dans Mon Compte ‚û°Ô∏è Onglet Git\nRenseignez les informations suivantes\n\nnom d‚Äôutilisateur Git\nmail (celui utilis√© pour votre compte GitHub)\n\nCollez votre token\n\n\n\n\n\n\n\nConfig Git\n\n\n\nVous pouvez maintenant √©changer du code entre les services du Datalab et vos d√©p√¥ts GitHub. üéâ\n\n\n\n\n4.3 D√©p√¥t pour le code\nAvant de cr√©er un service, nous allons cr√©er un d√©p√¥t GitHub qui permettra de sauvegarder votre code.\n\nDans GitHub, cr√©er un nouveau Repository\n\nRepository name : TP3-datalab\nPrivate\n‚úÖ Cochez Add a README file\n.gitignore template : Python\nChoose a license : Apache Licence 2.0\nCreate Repository\n\nSur la page de votre repo, cliquez sur le bouton Code\nCopiez l‚Äôadresse https du repo\n\n\n\n4.4 Branchez votre service sur un r√©po\nLors du lancement d‚Äôun Service, vous pouvez vous brancher sur un r√©po git. Ainsi le contenu de votre d√©p√¥t sera import√© dans votre service.\nVous pourrez alors utiliser le code de votre d√©p√¥t et √©ventuellement le mettre √† jour en effectuant un push.\nLancez un service Jupyter Notebook\n\nOuvrez la Configuration\n\nDe nombreux onglets permettent de configurer votre service\nService : possibilit√© d‚Äôutiliser une autre image Docker\nResources : choisir CPU et RAM\nInit : script √† lancer au d√©marrage\n\nAllez dans l‚Äôonglet Git et collez l‚Äôadresse https du repo dans la case Repository url\nLancez le service, puis attendez quelques secondes\n\n\n\n4.5 Sauver son code\n\nSur Jupyter, ouvrez un terminal\n\nFile ‚û°Ô∏è New ‚û°Ô∏è Terminal\n\nPositionnez-vous dans le repo : cd /home/onyxia/work/TP3-datalab/\ngit status pour voir l‚Äô√©tat actuel\n\nle fichier ex0.ipynb doit appara√Ætre dans les Untracked files\n\nAjoutez ce fichier √† l‚Äôindex\nCr√©ez un commit\nPoussez ce commit vers votre d√©p√¥t distant (GitHub)\n\nVous pouvez v√©rifier sur GitHub que votre fichier ex0.ipynb est bien pr√©sent\n\n\n\n\n\n\n\n\nTip\n\n\n\n\n\n\ngit add .\ngit commit -m \"cr√©ation fichier tp3\"\ngit push\n\n\n\n\n\nExercice\nPar exemple en important le fichier des pr√©noms avec Polars et en encapsulant du SQL :\n\n√âcrivez la requ√™te du nombre de fois ou votre pr√©nom a √©t√© donn√© entre 2010 et 2020\nCr√©ez une nouvelle cellule et √©crivez une requ√™te pour afficher les 5 ann√©es o√π sont n√©es le plus de filles\nQuels sont les pr√©noms masculins et f√©minins les plus donn√©s depuis 1900 ?\nAffichez le nombres de filles et de gar√ßons n√©s chaque ann√©e depuis 2010\n\nüí° Aide : SUM(CASE WHEN ? THEN ? ELSE ? END)"
  },
  {
    "objectID": "doc/tp/tp3.html#minio",
    "href": "doc/tp/tp3.html#minio",
    "title": "D√©couverte du Datalab",
    "section": "5 MinIO",
    "text": "5 MinIO\nD‚Äôautres possibilit√©s pour acc√©der √† votre stockage\n\n5.1 Client MinIO\nLe client MinIO install√© et utilisable depuis le terminal permet √©galement d‚Äôinteragir avec vos fichiers.\nOuvrez un terminal (File ‚û°Ô∏è New ‚û°Ô∏è Terminal):\n\nmc ls s3/&lt;username&gt;/ENSAI/SQL : pour lister le contenu de votre dossier\nmc cp s3/&lt;username&gt;/ENSAI/SQL/output.csv . : pour copier le fichier depuis s3 dans votre dossier courant\n\nle fichier apparait dans votre explorer\n\nSupprimez ce fichier : rm output.csv\n\nCar importer les fichiers de donn√©es dans son espace de travail n‚Äôest pas une bonne pratique\n\n\n\n\n\n\n\n\nTip\n\n\n\nLa commande mc --help liste toutes les commandes possibles (ESPACE pour d√©filer, CTRL+C pour sortir)\n\n\n\n\n5.2 Console Minio\nVous pouvez √©galement acc√©der √† votre stockage avec la console Minio :\n\nhttps://minio-console.lab.sspcloud.fr/\nhttps://minio-simple.lab.groupe-genes.fr\n\n\n\n5.3 Python et s3fs\nimport os\nimport s3fs\nimport polars as pl\n\nfs = s3fs.S3FileSystem(\n    client_kwargs={\"endpoint_url\": f\"https://{os.environ['AWS_S3_ENDPOINT']}\"},\n    key = os.environ[\"AWS_ACCESS_KEY_ID\"], \n    secret = os.environ[\"AWS_SECRET_ACCESS_KEY\"], \n    token = os.environ[\"AWS_SESSION_TOKEN\"])\n\ns3_username = os.environ[\"VAULT_TOP_DIR\"] # un peu bancal pour avoir le username\n\nbucket_name = f\"{s3_username}/diffusion/\"\n\nfiles = fs.ls(bucket_name)\n\nfor file in files:\n    print(file)\n\n\n\n\n\n\nAffichage plus joli\n\n\n\n\n\n!pip install humanize\nimport humanize\n\ndata = []\n\nfor file in fs.ls(bucket_name, detail=True):\n\n    if file['type'] == 'directory':\n        subfolder_files = fs.find(file['name'])\n        file_count = len(subfolder_files)\n        file_type = \"Folder\"\n        size = None\n    else:\n        file_count = \"\"\n        file_type = \"File\"\n        size = file['size']\n    \n    data.append({\n        \"Name\": os.path.basename(file['name']),\n        \"Type\": file_type,\n        \"Size\": size or 0,\n        \"Nb Files\": file_count\n    })\n\ndf = pl.DataFrame(sorted(\n         data,\n         key=lambda x: (\n             0 if x[\"Type\"] == \"Folder\" else 1,\n             -x[\"Nb Files\"] if x[\"Nb Files\"] else 0,\n             -x[\"Size\"])\n        ))\\\n        .with_columns(pl.col('Size').map_elements(lambda x: humanize.naturalsize(x, binary=True) if x else \"\", return_dtype=pl.String).alias('Size'))\n\nprint(f\"Bucket : {bucket_name}\", df, sep = \"\\n\")"
  },
  {
    "objectID": "doc/tp/tp3.html#surveiller-son-service",
    "href": "doc/tp/tp3.html#surveiller-son-service",
    "title": "D√©couverte du Datalab",
    "section": "6 Surveiller son service",
    "text": "6 Surveiller son service\n\nSur la page du Datalab, allez dans Mes services\nCliquez sur le nom du service (Jupyter-python)\nCliquez sur Surveillance externe\n\nVous arrivez sur la page de l‚Äôoutil Grafana qui permet d‚Äôobserver les m√©triques de votre service."
  },
  {
    "objectID": "doc/tp/tp3.html#les-secrets",
    "href": "doc/tp/tp3.html#les-secrets",
    "title": "D√©couverte du Datalab",
    "section": "7 Les secrets",
    "text": "7 Les secrets\n\n\n\n\n\n\nEnigme du P√®re Fouras\n\n\n\nPlus j‚Äôai de gardiens, moins je suis gard√©.\nMoins j‚Äôai de gardiens, plus je suis gard√©.\nQui suis-je ?\n\n\nCertains √©l√©ments ne doivent pas √™tre diffus√©s dans votre code (jetons d‚Äôacc√®s, mots de passe‚Ä¶).\nPour √©viter d‚Äôavoir √† nettoyer votre code √† chaque fois que vous le poussez sur GitHub, le datalab propose de g√©rer vos secrets.\n\n7.1 Cr√©er un secret\n\nAllez dans Mes secrets\nCr√©ez un Nouveau secret nomm√© projet_patate\nDouble-cliquez pour ouvrir ce secret\nAjoutez une variable\n\nNom : PATATE_TOKEN\nValeur : 123456\nCliquez sur ‚úÖ pour valider\n\nAjoutez une autre variable\n\nNom : PATATE_PORT\nValeur : 5236\nCliquez sur ‚úÖ pour valider\n\n\n\n\n7.2 Utiliser dans un service\n\nPr√©parez le lancement d‚Äôun service Rstudio\nDans la configuration, allez dans l‚Äôonglet Vault\nsecret : projet_patate\nLancez le service\n\nDans votre servives, les deux variables d‚Äôenvironnement ont √©t√© cr√©√©es.\n\nV√©rifiez leur pr√©sence via le terminal : env | grep PATATE ou echo $PATATE_TOKEN\nOuvrez un notebook et r√©cup√©rez la valeur de PATATE_TOKEN\nimport os\n\ntoken = os.environ[\"PATATE_TOKEN\"]\nprint(token)\nUne fois que vous avez fini de jouer, supprimez votre service\n\n\n\n\n\n\n\nNote\n\n\n\nCe TP avait pour but de vous familiariser avec le Datalab. Vous pouvez l‚Äôutiliser pour faire du Python, du R, cr√©er une base de donn√©es (prochain TP) ou utiliser de nombreux autres outils."
  },
  {
    "objectID": "doc/tp/tp3.html#personnaliser-son-service",
    "href": "doc/tp/tp3.html#personnaliser-son-service",
    "title": "D√©couverte du Datalab",
    "section": "8 Personnaliser son service",
    "text": "8 Personnaliser son service\nüöß\n\nUtiliser un script d‚Äôinitiation\nUtilser sa propre image Docker"
  },
  {
    "objectID": "doc/tp/tp2.html",
    "href": "doc/tp/tp2.html",
    "title": "Exercices vintages",
    "section": "",
    "text": "Lors du premier TP, nous avons utilis√© DuckDB pour lire les donn√©es d‚Äôun fichier parquet. Aujourd‚Äôhui nous allons cr√©er notre propre base de donn√©es PostgreSQL, puis y d√©clarer des tables et ins√©rer de donn√©es. Enfin nous allons requ√™ter ces donn√©es.\nLors de ce TP, vous allez :\n\nCr√©er votre base de donn√©es PostgreSQL\nLancer des scripts de cr√©ation de tables et d‚Äôinsertion de donn√©es\nRelier des tables en utilisant les jointures\nS√©lectionner et filtrer des donn√©es\n\n\n\n\n\n\n\nImportant\n\n\n\n\n√âcrivez des requ√™tes jolies !"
  },
  {
    "objectID": "doc/tp/tp2.html#introduction",
    "href": "doc/tp/tp2.html#introduction",
    "title": "Exercices vintages",
    "section": "",
    "text": "Lors du premier TP, nous avons utilis√© DuckDB pour lire les donn√©es d‚Äôun fichier parquet. Aujourd‚Äôhui nous allons cr√©er notre propre base de donn√©es PostgreSQL, puis y d√©clarer des tables et ins√©rer de donn√©es. Enfin nous allons requ√™ter ces donn√©es.\nLors de ce TP, vous allez :\n\nCr√©er votre base de donn√©es PostgreSQL\nLancer des scripts de cr√©ation de tables et d‚Äôinsertion de donn√©es\nRelier des tables en utilisant les jointures\nS√©lectionner et filtrer des donn√©es\n\n\n\n\n\n\n\nImportant\n\n\n\n\n√âcrivez des requ√™tes jolies !"
  },
  {
    "objectID": "doc/tp/tp2.html#lancement-des-services",
    "href": "doc/tp/tp2.html#lancement-des-services",
    "title": "Exercices vintages",
    "section": "1 Lancement des services",
    "text": "1 Lancement des services\n\n1.1 Datalab du GENES ou SSPCloud\nConnectez-vous √† l‚Äôune des 2 instances suivantes d‚ÄôOnyxia (elles sont quasiment identiques) :\n\nDatalab du GENES\nDatalab SSPCloud de l‚ÄôINSEE\n\nsi besoin de cr√©er un compte, utilisez votre mail ENSAI\n\n\n\n\n\n\n\n\nTip\n\n\n\nL‚Äôinstance du GENES est plus r√©cente donc encore en cours de rodage. Celle de l‚ÄôINSEE est plus ancienne et donc plus robuste.\nPour √©viter les probl√®mes de charges, vous utiliserez selon votre profil :\n\n√©l√®ves fonctionnaires ‚û°Ô∏è SSPCloud\n√©l√®ves ing√©nieurs ‚û°Ô∏è SSPCloud ou Datalab du GENES\n\n\n\n\n\n1.2 Base de donn√©es PostgreSQL\n\nLancez le service PostgreSQL\n\nLien direct de lancement : Datalab GENES ou SPPCloud\nou manuellement : Catalogue de services ‚û°Ô∏è Databases ‚û°Ô∏è Lancer\nConfiguration Postgresql ‚û°Ô∏è Primary : Mettez tous les param√®tres au minimum (Persistent volume size, CPU, Memory)\n\nCela permettra d‚Äô√©viter de r√©server inutilement des ressources dont vous n‚Äôaurez pas besoin\n\nCliquez sur Lancer\n\nCopiez-collez dans un fichier texte les informations de connexion PostgreSQL : Hostname, Port, Database, Username, Password\n\n\n\n1.3 CloudBeaver\nNous venons de cr√©er un SGBD, nous avons maintenant besoin d‚Äôun outil de gestion pour s‚Äôy connecter et envoyer des requ√™tes.\n\nLancez le service CloudBeaver\n\nCatalogue de services ‚û°Ô∏è Databases\n\nCopiez-collez √©galement les informations de connexion au service CloudBeaver\nOuvrez ce service\n\n\n\n\n\n\n\nTip\n\n\n\nNormalement la connexion √† la base de donn√©es PostgreSQL est d√©tect√©e automatiquement.\nDans le cas contraire, il faut cliquer sur le +, puis sur New connection et renseigner les √©l√©ments de connexion.\n\n\n\nDans l‚Äôexplorateur √† gauche, clic droit sur bdd PostgreSQL ‚û°Ô∏è SQL Editor\n\nCela ouvre une fen√™tre o√π vous pouvez √©crire du code SQL pour interagir avec votre base de donn√©es.\n\n\n1.4 VM ENSAI\nUniquement en cas de soucis avec les Datalabs, vous pouvez faire le TP sur la VM.\n\n\n\n\n\n\nDBeaver sur la VM\n\n\n\n\n\nUn serveur h√©berge une base de donn√©es PostgreSQL.\nPour vous connecter √† votre bdd, lancez le logiciel DBeaver depuis votre VM. Ensuite, uniquement la premi√®re fois, vous devrez effectuer le param√®trage ci-dessous et cr√©er la connexion √† votre bdd.\n\nParam√®trage\n\nMenu Fen√™tre &gt; Preference\n\nFormatage SQL\n\nCasse des mots clefs : UPPER\nInsert spaces for tabs\nAppliquer\n\nMetadonn√©es\n\nD√©cocher Ouvrir une connexion s√©par√©e pour la lecture des m√©tadonn√©es\n\nEditeur SQL\n\nD√©cocher Ouvrir une connexion s√©par√©e pour chaque √©diteur\n\n\n\n\n\nCr√©ation de la connexion PostgreSQL\n\nCliquer sur l‚Äôicone Nouvelle connexion en haut √† gauche sous fichier\nS√©lectionner PostgreSQL puis suivant\n\nHost : sgbd-eleves.domensai.ecole\nPort : 5432\nDatabase : idxxxx\nNom d‚Äôutilisateur : idxxxx\nMot de passe : idxxxx\nTest de connexion\nAcceptez les mises √† jour des pilotes\nTerminer"
  },
  {
    "objectID": "doc/tp/tp2.html#m√©thodo-√©crire-une-requ√™te",
    "href": "doc/tp/tp2.html#m√©thodo-√©crire-une-requ√™te",
    "title": "Exercices vintages",
    "section": "2 M√©thodo : √âcrire une requ√™te",
    "text": "2 M√©thodo : √âcrire une requ√™te\nIl est parfois difficile d‚Äô√©crire du premier coup LA requ√™te qui r√©pond directement √† la question pos√©e. Voici une m√©thode qui peut vous aider √† √©crire vos requ√™tes pas √† pas :\n\n\n\n\n\n\nImaginons que l‚Äôon vous demande de lister les noms et pr√©noms des joueuses du club de la ville de Saint Quentin, dont le pr√©nom commence par un A class√©es par elo d√©croissant.\njoueuse(id_joueuse, nom, prenom, elo, #id_club)\nclub(id_club, nom, ville)\n\n\n\n\n2.1 Listez les tables n√©cessaires\nCommencez par lister les tables n√©cessaires, puis joignez les. Ici nous avons besoin des 2 tables.\nUtilisez pour l‚Äôinstant SELECT * pour s√©lectionner toutes les colonnes.\nSELECT *\n  FROM joueuse j\n  JOIN club c USING(id_club);\n\n\n2.2 Appliquez les filtres\nPour ne garder que les lignes qui nous int√©ressent :\n\nVille du club : Saint Quentin\nPr√©nom qui commence par un A**\n\nSELECT *\n  FROM joueuse j\n  JOIN club c USING(id_club)\n WHERE c.ville = 'Saint Quentin'\n   AND j.prenom LIKE 'A%';\n\n\n2.3 Ordonnez les r√©sultats\nSELECT *\n  FROM joueuse j\n  JOIN club c USING(id_club)\n WHERE c.ville = 'Saint Quentin'\n   AND j.prenom LIKE 'A%'\n ORDER BY j.elo DESC;\n\n\n2.4 S√©lectionner les colonnes requises\nIl est demand√© de ne garder que les noms et pr√©noms des joueuses\nSELECT j.nom,\n       j.prenom\n  FROM joueuse j\n  JOIN club c USING(id_club)\n WHERE c.ville = 'Saint Quentin'\n   AND j.prenom LIKE 'A%'\n ORDER BY j.elo DESC;"
  },
  {
    "objectID": "doc/tp/tp2.html#exercices",
    "href": "doc/tp/tp2.html#exercices",
    "title": "Exercices vintages",
    "section": "3 Exercices",
    "text": "3 Exercices\n\n3.1 √âcole de musique üé∏\nNous allons commencer par cr√©er les tables et ins√©rer les donn√©es :\n\nCopiez le contenu de ce script sql\nCollez dans la fen√™tre SQL de CloudBeaver\nEx√©cutez le script\n\nCliquez sur la petite icone sous les triangles oranges qui ressemble √† üìú\nraccourci (ALT + X)\n\nV√©rifiez que votre sch√©ma et vos tables sont cr√©√©s\n\nDans l‚Äôexplorateur : PostgreSQL ‚û°Ô∏è Databases ‚û°Ô∏è defaultdb ‚û°Ô∏è Schemas\nClic droit sur Schemas ‚û°Ô∏è Refresh\n\n\nSi tout est ok, vous n‚Äôavez plus besoin du script de cr√©ation et d‚Äôinsertion de donn√©es.\n\nSupprimez tout le contenu du code SQL que vous venez d‚Äôex√©cuter ou ouvrez un nouvel √©diteur SQL\n\nVoici le mod√®le de donn√©es :\n\nVous pouvez maintenant commencer l‚Äôexercice et √©crire les requ√™tes permettant de r√©pondre aux questions suivantes :\n\nQuels sont les noms des instruments pr√©sents dans la base de donn√©es\nQuels sont les noms et adresses des adh√©rents\nQuelle est l‚Äôadresse de l‚Äôadh√©rent num√©ro 15\nQuels sont les num√©ros des adh√©rents de nom DUPONT\n\nR√©alisez les jointures qui permettent d‚Äôobtenir :\n\nLes noms des instruments dont joue chaque adh√©rent\nLe nom des adh√©rents inscrits au cours num√©ro 6\nLes noms des cours ayant lieu le samedi et les noms des adh√©rents inscrits\nLes noms des cours auxquels sont inscrits les adh√©rents qui jouent du piano\nDe quels instruments jouent les personnes inscrites au cours de guitare classique (GUIT-CLASS)\n\n\n\n3.2 Location de DVD üíø\nIl fut un temps o√π des entreprises se sp√©cialisaient dans la location de DVD. Dans cet exercice, une telle entreprise souhaite informatiser la gestion des pr√™ts.\nVoici le Mod√®le de donn√©es :\n\n\nCr√©ation de tables\n\nUtiliser le code ci-dessous pour cr√©er le sch√©ma et les 3 tables de droite\nDROP SCHEMA IF EXISTS dvd CASCADE;\n\nCREATE SCHEMA dvd;\n\nCREATE TABLE dvd.realisateur(\n    num_realisateur    INT PRIMARY KEY,\n    nom_realisateur    TEXT,\n    prenom_realisateur TEXT);\n\nCREATE TABLE dvd.film(\n    num_film       INT PRIMARY KEY,\n    titre          TEXT,\n    genre          TEXT,\n    date_sortie    DATE);\n\nCREATE TABLE dvd.a_realise(\n    num_film         INT REFERENCES dvd.film(num_film),\n    num_realisateur  INT REFERENCES dvd.realisateur(num_realisateur),\n    PRIMARY KEY (num_film, num_realisateur));\n√âcrivez les requ√™tes qui permettent de cr√©er les 3 autres tables\nChargez les donn√©es avec ce script sql\n\n\n\n\n\n\n\nTip\n\n\n\n\n\nAttention, ici l‚Äôordre de cr√©ation des tables a son importance.\nReprenons et modifions l‚Äôexemple ci-dessus :\n\nimaginez que vous essayez de cr√©er en premier la table a_realise\nle champ num_film de cette table est une cl√© √©trang√®re\nil r√©f√©rence la cl√© primaire num_film de la table film\nor si la table film n‚Äôexiste pas, √† votre avis, que va-t-il se passer ?\n\n\n\n\n\n\nRequ√™tes\nDonnez les requ√™tes pour obtenir :\n\nNom et pr√©nom des adh√©rents\nTitre des films de la base\nNum√©ro d‚Äôadh√©rent de Pierre DUCHEMIN\nNom, Pr√©nom et adresse de tous les DUCHEMIN\nNum√©ro des DVD du film la guerre des etoiles\n\nPour les 3 requ√™tes suivantes, vous afficherez les noms et pr√©noms sur une seule colonne. Utilisez le mot cl√© AS pour renommer cette colonne √† l‚Äôaffichage.\n\nNom, Pr√©nom des adh√©rents ayant emprunt√© le film la guerre des etoiles\nNom, Pr√©nom des adh√©rents ayant au moins un emprunt en cours (la date de fin de l‚Äôemprunt est nulle)\nNom, Pr√©nom du r√©alisateur de la Guerre des √©toiles\n\n\n\n\n\n\n\nTip\n\n\n\n\n\nIl existe diff√©rentes mani√®res de concat√©ner du texte :\n\nfonctions PostgreSQL CONCAT(), CONCAT_WS()\nop√©rateur ||\n\n\n\n\n\nTitre des films emprunt√©s par Pierre DUCHEMIN, ainsi que dates de d√©but et de fin\nNom des r√©alisateurs des films emprunt√©s par Pierre DUCHEMIN\nNom des r√©alisateurs de films de science fiction ou policiers\n\nUtilisons maintenant des m√©thodes d‚Äôagr√©gation pour r√©pondre aux questions suivantes :\n\nNombre de DVD dont le co√ªt de l‚Äôemprunt est inf√©rieur ou √©gal √† 2‚Ç¨\nNombre d‚Äôemprunts ayant √©t√© effectu√©s par Dominique Duchemin\nNombre de films diff√©rents ayant √©t√© emprunt√©s par Dominique Duchemin\nNum√©ro des DVD en ordre d√©croissant du nombre de fois qu‚Äôils ont √©t√© emprunt√©s\nNum√©ro du DVD le plus r√©cemment achet√©\n\nQuelques questions sur les dates :\n\nQuelle a √©t√© la dur√©e d‚Äôemprunt la plus longue\nEn date du 10 ao√ªt 2010, combien de DVD sont en cours d‚Äôemprunt\nCombien de dvd ont √©t√© achet√©s chaque ann√©e\n\nPour terminer cet exercice, nous allons rechercher les titres des films qui n‚Äôont jamais √©t√© emprunt√©s. Proc√©dons par √©tapes et √©crivez les requ√™tes suivantes :\n\nDiff√©rents num√©ros des films emprunt√©s\nTitre des films ayant pour num√©ro 18, 19 ou 20\nTitre des films n‚Äôayant pas pour num√©ros ni 18, ni 19, ni 20\nTitre des films n‚Äôayant jamais √©t√© emprunt√©s\n\n\n\n\n3.3 Rugby World Cup üèâ\n\n\n\n\n\n\nPour les plus rapides üöÄ\n\n\n\nNous souhaitons informatiser les r√©sultats de la coupe du monde de rugby. Pour cela nous avons cr√©√© les deux tables suivantes : equipe et matches.\nCommencez par cr√©ez et charger les tables avec ce script.\n\nDonner les noms des √©quipes qui ont jou√© √† Nantes\nContre quelles √©quipes a jou√© l‚Äô√©quipe de France ?\nPour tous les matchs, affichez les informations suivantes :\n\nDate du match\nNom de la premi√®re √©quipe\nnombre de points de la premi√®re √©quipe\nnombre de points de la deuxi√®me √©quipe\nnom de la deuxi√®me √©quipe et lieu du match\n\nQuels sont les noms d‚Äô√©quipes qui ont gagn√© au moins deux matchs\nQuels sont les noms des √©quipes qui ont perdu tous leurs matchs\nPour chaque √©quipe donner le nombre de matchs qu‚Äôelles ont gagn√© ou perdu\nDonner le nombre total de points obtenus par √©quipe en classant les √©quipes de celle ayant marqu√© le plus √† celle ayant marqu√© le moins"
  },
  {
    "objectID": "doc/tp/tp2.html#arr√™tez-votre-service",
    "href": "doc/tp/tp2.html#arr√™tez-votre-service",
    "title": "Exercices vintages",
    "section": "Arr√™tez votre service",
    "text": "Arr√™tez votre service\nC‚Äôest la fin du TP, vous pouvez maintenant sauvegarder votre travail et lib√©rer les ressources r√©serv√©es :\n\nCopiez votre code et collez le sur votre machine dans un fichier .sql\n\npar exemple dans P:/Cours1A/UE3-Bases-de-donnees-relationnelles/TP2/tp2.sql\nou en t√©l√©chargeant depuis CloudBeaver le fichier sql (petit bouton avec un dossier et une fl√®che vers le bas)\n\nRetournez sur la page d‚Äôaccueil du Datalab\nAllez dans Mes Services et supprimez votre service"
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#programmation-avec-python-bases-et-applications",
    "href": "doc/cours/intro-python-slides.html#programmation-avec-python-bases-et-applications",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Programmation avec Python : Bases et Applications",
    "text": "Programmation avec Python : Bases et Applications\n\n18h : CM+TP\nContact : natachayepnga@gmail.com\nOutils recommand√©s : VS Code, Jupyter Notebook"
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#objectifs",
    "href": "doc/cours/intro-python-slides.html#objectifs",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Objectifs",
    "text": "Objectifs\n\nComprendre les bases du langage Python.\nManipuler les variables, types de donn√©es et structures de contr√¥le.\nExplorer les biblioth√®ques populaires : NumPy, Pandas, Matplotlib.\nIntroduire les concepts de machine learning avec Scikit-learn.\nR√©aliser un projet int√©grant toutes les notions vues."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#python",
    "href": "doc/cours/intro-python-slides.html#python",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Python",
    "text": "Python\n\nLangage polyvalent : data science, machine learning, d√©veloppement web, automatisation.\nAvantages :\n\nSyntaxe simple et claire.\nLarge √©cosyst√®me de biblioth√®ques open source.\nUtilis√© par des entreprises, start-ups, et dans la recherche acad√©mique."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#organisation-des-tp",
    "href": "doc/cours/intro-python-slides.html#organisation-des-tp",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Organisation des TP",
    "text": "Organisation des TP\n\n5 TP + 1 projet final\nEnvironnements : VS Code, Jupyter Notebook, Google Colab.\nApproche : Alternance entre exercices guid√©s et explorations libres.\nLes projets doivent suivre une structuration rigoureuse :\n\nNettoyage des donn√©es.\nVisualisation.\nAnalyse et mod√©lisation."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#ce-quil-faut-faire",
    "href": "doc/cours/intro-python-slides.html#ce-quil-faut-faire",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Ce qu‚Äôil faut faire",
    "text": "Ce qu‚Äôil faut faire\n\nLisez attentivement les consignes de chaque TP.\nEssayez de r√©soudre les exercices par vous-m√™me.\nRecherchez dans les cours et tutoriels en ligne.\nTravaillez en bin√¥me pour √©changer des id√©es.\nPosez des questions √† l‚Äôenseignante en cas de blocage."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#√†-ne-pas-faire",
    "href": "doc/cours/intro-python-slides.html#√†-ne-pas-faire",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "√Ä ne pas faire",
    "text": "√Ä ne pas faire\n\nUtiliser ChatGPT sans comprendre la solution.\nCopier/coller des r√©ponses sans v√©rifier leur validit√©.\nNe pas documenter votre code ou vos d√©marches.\n\n\nNote : Ces pratiques nuisent √† l‚Äôapprentissage et √† la compr√©hension."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#√©valuation",
    "href": "doc/cours/intro-python-slides.html#√©valuation",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "√âvaluation",
    "text": "√âvaluation\n\nPartie 1 : Projet √† faire √† la maison.\n\nSujet distribu√© une semaine avant la date de l‚Äôexamen.\nAnalyse et exploration d‚Äôun dataset fourni.\n√Ä rendre sous forme d‚Äôun notebook bien structur√© :\n\nExplication des √©tapes de nettoyage.\nVisualisation des donn√©es et interpr√©tation.\nConclusions et recommandations.\n\n\nPartie 2 : QCM.\n\nDur√©e : 2h.\nQuestions portant sur les concepts abord√©s pendant le cours et les TP.\nLa date sera d√©finie √† l‚Äôavance."
  },
  {
    "objectID": "doc/cours/intro-python-slides.html#bibliographie",
    "href": "doc/cours/intro-python-slides.html#bibliographie",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Bibliographie",
    "text": "Bibliographie\n\nDocumentation officielle Python\nPython for Everybody\nGoogle Colab\nPython Crash Course (Livre)\nW3Schools Python Tutorial"
  },
  {
    "objectID": "doc/cours/intro.html",
    "href": "doc/cours/intro.html",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "",
    "text": "18h : CM+TP\nContact : natachayepnga@gmail.com\nOutils recommand√©s : VS Code, Jupyter Notebook"
  },
  {
    "objectID": "doc/cours/intro.html#programmation-avec-python-bases-et-applications",
    "href": "doc/cours/intro.html#programmation-avec-python-bases-et-applications",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "",
    "text": "18h : CM+TP\nContact : natachayepnga@gmail.com\nOutils recommand√©s : VS Code, Jupyter Notebook"
  },
  {
    "objectID": "doc/cours/intro.html#objectifs",
    "href": "doc/cours/intro.html#objectifs",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Objectifs",
    "text": "Objectifs\n\nComprendre les bases du langage Python.\nManipuler les variables, types de donn√©es et structures de contr√¥le.\nExplorer les biblioth√®ques populaires : NumPy, Pandas, Matplotlib.\nIntroduire les concepts de machine learning avec Scikit-learn.\nR√©aliser un projet int√©grant toutes les notions vues."
  },
  {
    "objectID": "doc/cours/intro.html#python",
    "href": "doc/cours/intro.html#python",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Python",
    "text": "Python\n\nLangage polyvalent : data science, machine learning, d√©veloppement web, automatisation.\nAvantages :\n\nSyntaxe simple et claire.\nLarge √©cosyst√®me de biblioth√®ques open source.\nUtilis√© par des entreprises, start-ups, et dans la recherche acad√©mique."
  },
  {
    "objectID": "doc/cours/intro.html#organisation-des-tp",
    "href": "doc/cours/intro.html#organisation-des-tp",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Organisation des TP",
    "text": "Organisation des TP\n\n5 TP + 1 projet final\nEnvironnements : VS Code, Jupyter Notebook, Google Colab.\nApproche : Alternance entre exercices guid√©s et explorations libres.\nLes projets doivent suivre une structuration rigoureuse :\n\nNettoyage des donn√©es.\nVisualisation.\nAnalyse et mod√©lisation."
  },
  {
    "objectID": "doc/cours/intro.html#ce-quil-faut-faire",
    "href": "doc/cours/intro.html#ce-quil-faut-faire",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Ce qu‚Äôil faut faire",
    "text": "Ce qu‚Äôil faut faire\n\nLisez attentivement les consignes de chaque TP.\nEssayez de r√©soudre les exercices par vous-m√™me.\nRecherchez dans les cours et tutoriels en ligne.\nTravaillez en bin√¥me pour √©changer des id√©es.\nPosez des questions √† l‚Äôenseignante en cas de blocage."
  },
  {
    "objectID": "doc/cours/intro.html#√†-ne-pas-faire",
    "href": "doc/cours/intro.html#√†-ne-pas-faire",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "√Ä ne pas faire",
    "text": "√Ä ne pas faire\n\nUtiliser ChatGPT sans comprendre la solution.\nCopier/coller des r√©ponses sans v√©rifier leur validit√©.\nNe pas documenter votre code ou vos d√©marches.\n\n\nNote : Ces pratiques nuisent √† l‚Äôapprentissage et √† la compr√©hension."
  },
  {
    "objectID": "doc/cours/intro.html#√©valuation",
    "href": "doc/cours/intro.html#√©valuation",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "√âvaluation",
    "text": "√âvaluation\n\nPartie 1 : Projet √† faire √† la maison.\n\nSujet distribu√© une semaine avant la date de l‚Äôexamen.\nAnalyse et exploration d‚Äôun dataset fourni.\n√Ä rendre sous forme d‚Äôun notebook bien structur√© :\n\nExplication des √©tapes de nettoyage.\nVisualisation des donn√©es et interpr√©tation.\nConclusions et recommandations.\n\n\nPartie 2 : QCM.\n\nDur√©e : 2h.\nQuestions portant sur les concepts abord√©s pendant le cours et les TP.\nLa date sera d√©finie √† l‚Äôavance."
  },
  {
    "objectID": "doc/cours/intro.html#bibliographie",
    "href": "doc/cours/intro.html#bibliographie",
    "title": "Programmation avec Python : Bases et Applications",
    "section": "Bibliographie",
    "text": "Bibliographie\n\nDocumentation officielle Python\nPython for Everybody\nGoogle Colab\nPython Crash Course (Livre)\nW3Schools Python Tutorial"
  },
  {
    "objectID": "doc/glossaire.html",
    "href": "doc/glossaire.html",
    "title": "Glossaire",
    "section": "",
    "text": "üöß"
  },
  {
    "objectID": "doc/glossaire.html#python",
    "href": "doc/glossaire.html#python",
    "title": "Glossaire",
    "section": "Python",
    "text": "Python\nUn langage de programmation interpr√©t√©, polyvalent, et accessible, utilis√© dans divers domaines comme la data science, l‚Äôintelligence artificielle, le d√©veloppement web et l‚Äôautomatisation.\n\nVariable\nUn espace m√©moire r√©serv√© pour stocker une valeur.\nEn Python, les variables n‚Äôont pas de type explicitement d√©fini, mais leur contenu en a un (ex : int, str, float).\nSynonymes : Identifiant, Conteneur.\n\n\nType de donn√©es\nCat√©gorie de donn√©es que peut prendre une variable : - int : nombres entiers. - float : nombres d√©cimaux. - str : cha√Ænes de caract√®res. - bool : valeurs bool√©ennes (True, False).\nSynonymes : Type, Classe."
  },
  {
    "objectID": "doc/glossaire.html#structures-de-contr√¥le",
    "href": "doc/glossaire.html#structures-de-contr√¥le",
    "title": "Glossaire",
    "section": "Structures de contr√¥le",
    "text": "Structures de contr√¥le\n\nCondition\nPermet d‚Äôex√©cuter un bloc de code en fonction d‚Äôune condition.\nSyntaxe en Python :\nif condition:\n    # Faire quelque chose\nelif autre_condition:\n    # Faire autre chose\nelse:\n    # Faire par d√©faut"
  }
]